(function(){var t={185:function(t,e,s){"use strict";var i=s(3032),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container",staticStyle:{width:"100%",height:"100%"}},[e("div",{staticClass:"chat-box",staticStyle:{width:"100%",height:"100%"}},[e("lemon-imui",{ref:"IMUI",attrs:{id:"app",user:t.user,width:"100%",height:"100%",hideMenu:"",contextmenu:t.contextmenu,"contact-contextmenu":t.contactContextmenu,theme:t.setting.theme,"hide-message-name":t.setting.hideMessageName,"hide-message-time":t.setting.hideMessageTime,avatarCricle:t.setting.avatarCricle,sendKey:t.setSendKey,wrapKey:t.wrapKey},on:{"change-contact":t.handleChangeContact,"pull-messages":t.handlePullMessages,"message-click":t.handleMessageClick,send:t.handleSend},scopedSlots:t._u([{key:"cover",fn:function(){return[e("div",[e("div",{staticClass:"cover"},[e("i",{staticClass:"lemon-icon-message"}),e("p",[e("b",[t._v(" Maons")]),t._v(" Web3.0 IM")]),e("p",[e("b",[t._v("无中心服务器")])]),e("p",[e("b",[t._v(" 全球共识状态一致")])]),e("p",[e("b",[t._v(" 数据主权不可侵犯")])]),e("p",[e("b",[t._v(" 数据共享全球可达 ​​​")])])])])]},proxy:!0},{key:"sidebar-message",fn:function(s){return[e("span",{staticClass:"lemon-badge lemon-contact__avatar"},[e("span",{staticClass:"lemon-avatar",class:{"lemon-avatar--circle":t.setting.avatarCricle},staticStyle:{width:"40px",height:"40px","line-height":"40px","font-size":"20px"}},[e("img",{attrs:{src:s.avatar}})]),s.unread>0&&1==s.is_notice?e("span",{staticClass:"lemon-badge__label"},[t._v(t._s(s.unread))]):t._e()]),e("div",{staticClass:"lemon-contact__inner"},[e("p",{staticClass:"lemon-contact__label"},[e("span",{staticClass:"lemon-contact__name"},[s.is_online&&0==s.is_group?e("span",{staticClass:"online-status",attrs:{title:"在线"}}):t._e(),1==s.is_group?e("el-tag",{attrs:{size:"mini"}},[t._v("群聊")]):t._e(),t._v(" "+t._s(s.displayName)+" ")],1),e("span",{staticClass:"lemon-contact__time",domProps:{textContent:t._s(t.formatTime(s.lastSendTime))}})]),e("p",{staticClass:"lemon-contact__content lemon-last-content"},[e("span",{staticClass:"lastContent"},[0==s.is_notice&&s.unread>0?e("span",[t._v("["+t._s(s.unread)+"条未读]")]):t._e(),e("span",{domProps:{innerHTML:t._s(s.lastContent)}})]),0==s.is_notice?e("span",{staticClass:"el-icon-close-notification font-16"}):t._e()])])]}},{key:"message-title",fn:function(s){return[e("div",{staticClass:"message-title-box"},[e("div",[0==t.isEdit?e("span",[1==t.is_group?e("span",{staticClass:"displayName",on:{click:function(e){t.isEdit=!0}}},[e("el-tag",{attrs:{size:"mini"}},[t._v("群聊")]),t._v(" "+t._s(s.displayName)),e("span",[t._v("("+t._s(t.groupUserCount)+")")]),1==s.setting.nospeak?e("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("仅群管理员可发言")]):t._e(),2==s.setting.nospeak?e("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("全员禁言中")]):t._e()],1):t._e(),0==t.is_group?e("span",{staticClass:"displayName"},[t._v(" "+t._s(s.displayName))]):t._e()]):t._e(),1==t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.displayName,expression:"displayName"}],staticClass:"editInput",domProps:{value:t.displayName},on:{blur:function(e){return t.saveGroupName(s)},input:function(e){e.target.composing||(t.displayName=e.target.value)}}}):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"message-title-tools"},[s.is_group?t._e():e("i",{staticClass:"el-icon-phone-outline mr-10",attrs:{title:"语音通话"},on:{click:function(e){return t.called(!1)}}}),s.is_group?t._e():e("i",{staticClass:"el-icon-video-camera mr-10",attrs:{title:"视频通话"},on:{click:function(e){return t.called(!0)}}})])])]}},{key:"sidebar-message-fixedtop",fn:function(s){return[e("div",{staticClass:"contact-fixedtop-box"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索联系人","prefix-icon":"el-icon-search"},on:{blur:t.closeSearch,focus:function(e){t.searchResult=!0}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),e("div",{staticStyle:{"margin-left":"10px"}},[e("el-button",{attrs:{title:"创建群聊",icon:"el-icon-plus",circle:""},on:{click:t.openCreateGroup}})],1),e("div",{staticClass:"lemon-menu__item lemon-menu__item--active",staticStyle:{"margin-left":"0px"},attrs:{title:"通讯录"},on:{click:function(e){return t.changeMenu("contacts")}}},[e("i",{staticClass:"lemon-icon-addressbook"})]),t.searchResult?e("div",{staticClass:"search-list"},[t._l(t.searchList,(function(i,a){return e("div",{key:a,staticClass:"search-list-item"},[e("lemon-contact",{attrs:{contact:i},on:{click:function(e){return t.openChat(i.id,s)}}})],1)})),0==t.searchList.length?e("div",{staticStyle:{margin:"20px"},attrs:{align:"center"}},[t._v(" 暂无 ")]):t._e()],2):t._e()],1)]}},{key:"sidebar-message-top",fn:function(s){return[t.chatTopList.length>0?e("div",{staticClass:"chat-top-list"},t._l(t.chatTopList,(function(i,a){return e("ChatTop",{key:a,attrs:{contact:i,avatarCricle:t.setting.avatarCricle,currentId:t.currentChat.id},nativeOn:{click:function(e){return t.openChat(i.id,s)}}})})),1):t._e()]}},{key:"sidebar-contact-fixedtop",fn:function(){return[e("div",{staticClass:"contact-fixedtop-box"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索联系人","prefix-icon":"el-icon-search"},on:{blur:t.closeSearch,focus:function(e){t.searchResult=!0}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),e("div",{staticStyle:{"margin-left":"10px"}},[e("el-button",{attrs:{title:"创建群聊",icon:"el-icon-plus",circle:""},on:{click:t.openCreateGroup}})],1),e("div",{staticClass:"lemon-menu__item lemon-menu__item--active",staticStyle:{"margin-left":"0px"},attrs:{title:"聊天"},on:{click:function(e){return t.changeMenu("messages")}}},[e("i",{staticClass:"lemon-icon-message"})]),t.searchResult?e("div",{staticClass:"search-list"},[t._l(t.searchList,(function(s,i){return e("div",{key:i,staticClass:"search-list-item"},[e("lemon-contact",{attrs:{contact:s},on:{click:function(e){return t.openChat(s.id,t.instance)}}})],1)})),0==t.searchList.length?e("div",{staticStyle:{margin:"20px"},attrs:{align:"center"}},[t._v(" 暂无 ")]):t._e()],2):t._e()],1)]},proxy:!0},{key:"message-side",fn:function(s){return[1==s.is_group?e("div",{staticClass:"slot-group-list"},[e("div",{staticClass:"group-side-box"},[e("div",{staticClass:"group-notice"},[e("div",{staticClass:"group-side-title"},[e("h4",[t._v("群公告")]),e("div",[s.role<3||0==s.setting.manage?e("span",{staticClass:"el-icon-edit font-18 handle",on:{click:function(e){t.noticeBox=!0}}}):t._e()])]),e("hr"),s.notice?e("div",{staticClass:"group-side-body",on:{click:t.openNotice}},[t._v(" "+t._s(s.notice)+" ")]):t._e(),s.notice?t._e():e("div",{staticClass:"group-side-body"},[t._v(" 暂无公告 ")])]),e("div",{staticClass:"group-user"},[e("div",{staticClass:"group-side-title"},[e("h4",[t._v("群成员")]),e("div",[s.role<3||1==s.setting.invite?e("span",{staticClass:"el-icon-circle-plus-outline font-18 handle",on:{click:t.openAddGroupUser}}):t._e()])]),e("hr"),e("div",{staticClass:"group-user-body",attrs:{id:"group-user"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.groupUser,(function(s,i){return e("lemon-contact",{directives:[{name:"lemon-contextmenu",rawName:"v-lemon-contextmenu.contact",value:t.groupMenu,expression:"groupMenu",modifiers:{contact:!0}}],key:i,staticClass:"user-list",attrs:{contact:s}},[e("div",{staticClass:"user-avatar"},[e("el-avatar",{attrs:{size:20,src:s.userInfo.avatar}})],1),e("div",{staticClass:"user-name"},[s.userInfo.id==t.user.id?e("span",{staticClass:"fc-danger"},[t._v(t._s(s.userInfo.displayName)+"（我）")]):t._e(),s.userInfo.id!=t.user.id?e("span",[t._v(t._s(s.userInfo.displayName))]):t._e()]),e("div",{staticClass:"user-role"},[1==s.role?e("i",{staticClass:"el-icon-user-solid fc-danger",attrs:{title:"创建者"}}):t._e(),2==s.role?e("i",{staticClass:"el-icon-user-solid fc-warning",attrs:{title:"管理员"}}):t._e()])])})),1)],1)])])]):t._e()]}},{key:"message-after",fn:function(s){return[s.fromUser.id==t.user.id&&0==s.is_group?e("span",{staticStyle:{visibility:"hidden"}},[s.is_read?t._e():e("span",[t._v(" 未读 ")]),s.is_read?e("span",{staticStyle:{color:"green"}},[t._v(" 已读 ")]):t._e()]):t._e()]}},{key:"editor-footer",fn:function(){return[t._v(" "+t._s(t.sendTips)+" ")]},proxy:!0},{key:"contact-info",fn:function(s){return[e("div",{staticClass:"lemon-contact-info"},[e("lemon-avatar",{attrs:{src:s.avatar,size:90}}),e("div",{staticClass:"lemon-contact-info-details"},[e("h4",[t._v(t._s(s.displayName))]),e("p",[t._v("昵称: "+t._s(s.realname))]),e("p",[t._v("公钥: "+t._s(s.user_id))]),s.is_group?e("p",[t._v("群组")]):e("p",[t._v("非群组")]),s.remarkName?e("p",[t._v("备注名称: "+t._s(s.remarkName))]):t._e(),e("lemon-button",{on:{click:function(e){return t.openChat(s.id)}}},[t._v(" 发送消息 ")]),e("lemon-button",{on:{click:function(e){return t.getUserInfo(s.user_id)}}},[t._v(" 重新获取用户信息 ")]),e("lemon-button",{on:{click:function(e){return t.toggleFollow(s)}}},[t._v(" "+t._s(s.is_followed?"取消关注":"关注")+" ")])],1)],1)]}}])})],1),e("el-dialog",{attrs:{title:"创建群聊",visible:t.createChatBox,modal:!0,width:"612px"},on:{"update:visible":function(e){t.createChatBox=e}}},[e("el-transfer",{attrs:{filterable:"",titles:t.createChatTitles,"filter-placeholder":"请输入关键词",props:t.defaultProps,data:t.allUser},model:{value:t.selectUid,callback:function(e){t.selectUid=e},expression:"selectUid"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.createChatBox=!1,t.selectUid=[]}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.createGroup}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"添加成员",visible:t.addGroupUserBox,modal:!0,width:"612px"},on:{"update:visible":function(e){t.addGroupUserBox=e}}},[e("el-transfer",{attrs:{filterable:"",titles:t.createChatTitles,"filter-placeholder":"请输入关键词",props:t.defaultProps,data:t.allUser},model:{value:t.selectUid,callback:function(e){t.selectUid=e},expression:"selectUid"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addGroupUserBox=!1,t.selectUid=[]}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addGroupUser}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"设置",visible:t.settingBox,modal:!0,width:"550px"},on:{"update:visible":function(e){t.settingBox=e}}},[e("el-tabs",{staticStyle:{"min-height":"300px"},attrs:{"tab-position":t.tabPosition}},[e("el-tab-pane",{attrs:{label:"账号设置"}},[e("div",{attrs:{align:"center"}},[e("el-avatar",{attrs:{src:t.user.avatar,size:50}}),e("br"),e("br"),e("p",[t._v(t._s(t.user.displayName))]),e("br"),e("p",[t._v("账号："+t._s(t.user.account))]),e("br"),e("el-button",{attrs:{type:"danger"},on:{click:t.logout}},[t._v("退出登录")])],1)]),e("el-tab-pane",{attrs:{label:"通用设置"}},[e("el-form",{ref:"form",attrs:{model:t.setting,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"发送消息："}},[e("el-radio-group",{model:{value:t.setting.sendKey,callback:function(e){t.$set(t.setting,"sendKey",e)},expression:"setting.sendKey"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("Enter")]),e("el-radio-button",{attrs:{label:"2"}},[t._v("Ctrl + Enter")])],1)],1),e("el-form-item",{attrs:{label:"系统主题："}},[e("el-radio-group",{model:{value:t.setting.theme,callback:function(e){t.$set(t.setting,"theme",e)},expression:"setting.theme"}},[e("el-radio-button",{attrs:{label:"default"}}),e("el-radio-button",{attrs:{label:"blue"}})],1)],1)],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.isVoice,callback:function(e){t.$set(t.setting,"isVoice",e)},expression:"setting.isVoice"}}),t._v(" 开启新消息声音提醒 ")],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.avatarCricle,callback:function(e){t.$set(t.setting,"avatarCricle",e)},expression:"setting.avatarCricle"}}),t._v(" 开启聊天圆形头像（需要刷新） ")],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.hideMessageName,callback:function(e){t.$set(t.setting,"hideMessageName",e)},expression:"setting.hideMessageName"}}),t._v(" 是否隐藏聊天窗口内的联系人名字 ")],1),e("div",{staticClass:"setting-switch"},[e("el-switch",{model:{value:t.setting.hideMessageTime,callback:function(e){t.$set(t.setting,"hideMessageTime",e)},expression:"setting.hideMessageTime"}}),t._v(" 是否隐藏聊天窗口内的消息发送时间 ")],1)],1),e("el-tab-pane",{attrs:{label:"关于 IM"}},[e("div",{attrs:{align:"center"}},[e("el-avatar",{attrs:{src:t.packageData.logo,size:50}}),e("br"),e("br"),e("p",[e("span",{staticClass:"main-color"},[t._v(" "+t._s(t.packageData.name)+" ")]),t._v("for "+t._s(t.packageData.version)+" ")])],1),e("div",{staticClass:"setting-version"},[e("b",[t._v(" 已经支持功能：")]),e("p",[t._v("1、单聊和群聊，新增消息管理器")]),e("p",[t._v("2、支持发送表情、图片、语音、视频和文件消息")]),e("p",[t._v("3、单聊支持消息已读未读的状态显示")]),e("p",[t._v("4、支持设置新消息声音提醒，浏览器通知")]),e("p",[t._v("5、支持部分Lemon-imui内功能设置")]),e("p",[t._v("6、支持文件、图片和绝大部分媒体文件在线预览")]),e("p",[t._v("7、群聊创建、删除和群成员管理、群公告、群禁言等")]),e("p",[t._v("8、可以置顶联系人，所有联系人可以设置消息免打扰")]),e("p",[t._v("9、全新支持增加音视频通话(一对一)")])])]),e("el-tab-pane",{attrs:{label:"开源"}},[e("div",{attrs:{align:"center"}},[e("el-avatar",{attrs:{src:t.packageData.logo,size:50}}),e("br"),e("br"),e("p",[e("span",{staticClass:"main-color"},[t._v(" "+t._s(t.packageData.name)+" ")]),t._v("for "+t._s(t.packageData.version)+" ")])],1),e("div",{staticClass:"setting-version"},[e("p",[t._v(" 前端地址："),e("a",{staticClass:"main-color",attrs:{href:"https://gitee.com/raingad/im-chat-front",target:"_blank"}},[t._v("[链接] im-chat-front")])]),e("p",[t._v(" 后端地址："),e("a",{staticClass:"main-color",attrs:{href:"https://gitee.com/raingad/im-instant-chat",target:"_blank"}},[t._v("[链接] im-instant-chat")])])]),e("div",{staticClass:"setting-version",staticStyle:{color:"#a6a6a6"}},[e("p",[t._v("前端技术栈：vue+Lemon-IMUI+element-UI")]),e("p",[t._v("后端技术栈：thinkphp6+workerman")])]),e("div",{staticClass:"setting-version"},[e("p",[t._v(" QQ交流群： "),e("a",{staticClass:"main-color",attrs:{href:"https://jq.qq.com/?_wv=1027&k=jMQAt9lh",target:"_blank"}},[t._v("336921267")])])])])],1)],1),e("el-dialog",{attrs:{title:"发布公告",visible:t.noticeBox,modal:!0,width:"500px"},on:{"update:visible":function(e){t.noticeBox=e}}},[e("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.notice,callback:function(e){t.notice=e},expression:"notice"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.noticeBox=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.publishNotice}},[t._v("确 定")])],1)],1),e("transition",{attrs:{name:"fade-user"}},[t.drawer?e("div",{staticClass:"previewBox"},[e("el-button",{staticClass:"drawer-close",attrs:{type:"danger",icon:"el-icon-close",circle:""},on:{click:function(e){t.drawer=!t.drawer}}}),e("iframe",{attrs:{src:t.previewUrl,frameborder:"0",width:"100%",height:"100%"}})],1):t._e()]),e("el-dialog",{attrs:{title:"转发",visible:t.forwardBox,modal:!0,width:"612px"},on:{"update:visible":function(e){t.forwardBox=e}}},[e("el-transfer",{attrs:{filterable:"",titles:t.createChatTitles,"filter-placeholder":"请输入关键词",props:t.contactsProps,data:t.allUser},model:{value:t.selectUid,callback:function(e){t.selectUid=e},expression:"selectUid"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.forwardBox=!1,t.selectUid=[]}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.forwardUser}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"消息管理器",visible:t.messageBox,modal:!0,width:"800px"},on:{"update:visible":function(e){t.messageBox=e}}},[e("ChatRecord",{key:t.componentKey,attrs:{contact:t.currentChat}})],1),e("el-dialog",{attrs:{title:"群设置",visible:t.groupSetting,modal:!0,width:"500px"},on:{"update:visible":function(e){t.groupSetting=e}}},[e("ChatSet",{key:t.componentKey,attrs:{contact:t.contactSetting}})],1),e("el-dialog",{attrs:{title:"语音录制","custom-class":"no-padding",visible:t.VoiceStatus,modal:!0,width:"500px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(e){t.VoiceStatus=e}}},[e("voice-recorder",{on:{send:t.sendVoice}})],1),e("Socket",{ref:"socket"}),e("webrtc",{key:t.componentKey,ref:"webrtc",attrs:{contact:t.currentChat,config:t.webrtcConfig,alias:t.packageData.name,userInfo:t.user}})],1)},n=[],r=(s(7658),s(3822)),o=[{label:"表情",children:[{name:"1f600",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f600.png"},{name:"1f62c",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f62c.png"},{name:"1f601",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f601.png"},{name:"1f602",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f602.png"},{name:"1f923",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f923.png"},{name:"1f973",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f973.png"},{name:"1f603",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f603.png"},{name:"1f604",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f604.png"},{name:"1f605",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f605.png"},{name:"1f606",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f606.png"},{name:"1f607",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f607.png"},{name:"1f609",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f609.png"},{name:"1f60a",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f60a.png"},{name:"1f642",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f642.png"},{name:"1f643",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f643.png"},{name:"1263a",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/263a.png"},{name:"1f60b",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f60b.png"},{name:"1f60c",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f60c.png"},{name:"1f60d",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f60d.png"},{name:"1f970",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f970.png"},{name:"1f618",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f618.png"},{name:"1f617",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f617.png"},{name:"1f619",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f619.png"},{name:"1f61a",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f61a.png"},{name:"1f61c",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f61c.png"},{name:"1f92a",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f92a.png"},{name:"1f928",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f928.png"},{name:"1f9d0",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f9d0.png"},{name:"1f61d",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f61d.png"},{name:"1f61b",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f61b.png"},{name:"1f911",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f911.png"},{name:"1f913",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f913.png"},{name:"1f60e",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f60e.png"},{name:"1f929",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f929.png"},{name:"1f921",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f921.png"},{name:"1f920",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f920.png"},{name:"1f917",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f917.png"},{name:"1f60f",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f60f.png"},{name:"1f636",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f636.png"},{name:"1f610",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f610.png"},{name:"1f611",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f611.png"},{name:"1f612",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f612.png"},{name:"1f644",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f644.png"},{name:"1f914",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f914.png"},{name:"1f925",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f925.png"},{name:"1f92d",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f92d.png"},{name:"1f92b",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f92b.png"},{name:"1f92c",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f92c.png"},{name:"1f92f",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f92f.png"},{name:"1f633",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f633.png"},{name:"1f61e",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f61e.png"},{name:"1f61f",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f61f.png"},{name:"1f620",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f620.png"},{name:"1f621",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f621.png"}]},{label:"收藏",children:[{name:"1f62c",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f62c.png"},{name:"1f621",title:"微笑",src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@v14.0.2/assets/72x72/1f621.png"}]}],c=s.p+"assets/img/login-background.2ae4dd8e.jpg",l=s(6265),d=s.n(l),u=s(8499),p=s.n(u),h=s(4462),m=s.n(h);function g(t){return q({url:"common/pub/login",method:"post",data:t})}function f(){return q({url:"common/pub/logout",method:"post"})}var v=s(2631),w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-wrapper",style:"background-image:url("+t.Background+")"},[e("div",{staticClass:"form-box"},[e("div",{staticClass:"form-title"},[e("img",{attrs:{src:t.packageData.logo,width:"100",alt:"icon"}})]),e("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"label-width":"0px"}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{ref:"username",attrs:{type:"text","auto-complete":"off",placeholder:"请输入账号","prefix-icon":"el-icon-user"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),e("div",{staticClass:"c-666",staticStyle:{"font-size":"12px"}},[t._v("演示账号：13800000001~13800000009，密码:123456")]),e("el-form-item",[e("el-checkbox",{model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,"rememberMe",e)},expression:"loginForm.rememberMe"}},[t._v("记住我")])],1),e("el-form-item",[e("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,size:"small",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t.loading?e("span",[t._v("登 录 中...")]):e("span",[t._v("登 录")])])],1),e("div",{staticClass:"c-999",attrs:{align:"center"}},[t._v(t._s(t.packageData.name)+" for "+t._s(t.packageData.version))])],1)],1)])},y=[],C=JSON.parse('{"name":"Maons-IM","version":"1.10.30","description":"去中心化聊天软件","logo":"https://im.file.raingad.com/logo/logo.png","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint"},"dependencies":{"axios":"^0.21.4","core-js":"^3.8.3","element-ui":"^2.15.1","js-audio-recorder":"^1.0.7","lemon-imui":"file:../lemon-imui","lockr":"^0.8.5","nprogress":"^0.2.0","v-clipboard":"^2.2.3","vue":"^2.6.14","vue-router":"^3.5.1","vuex":"^3.6.2"},"devDependencies":{"@babel/core":"^7.12.16","@babel/eslint-parser":"^7.12.16","@vue/cli-plugin-babel":"~5.0.0","@vue/cli-plugin-eslint":"~5.0.0","@vue/cli-plugin-router":"~5.0.0","@vue/cli-plugin-vuex":"~5.0.0","@vue/cli-service":"~5.0.0","eslint":"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-vue":"^8.0.3","prettier":"^2.4.1","sass":"^1.32.7","sass-loader":"^12.0.0","vue-template-compiler":"^2.6.14"},"rules":{"generator-star-spacing":"off","no-tabs":"off","no-unused-vars":"off","no-console":"off","no-irregular-whitespace":"off","no-debugger":"off"}}'),b={name:"Login",data(){return{Background:c,packageData:C,loginForm:{username:"13800000002",password:"123456",rememberMe:!0},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}]},loading:!1,redirect:void 0}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},mounted(){this.$nextTick((()=>{this.$refs.username.focus()}))},methods:{handleLogin(){this.$refs.loginForm.validate((t=>{const e={username:this.loginForm.username,password:this.loginForm.password};t&&(this.loading=!0,this.$store.dispatch("Login",e).then((t=>{window.location.reload()})).catch((()=>{this.loading=!1})))}))}}},_=b,x=s(1001),k=(0,x.Z)(_,w,y,!1,null,null,null),S=k.exports;i["default"].use(v.ZP);const M=[{path:"/",name:"home",component:Fe,meta:{title:"首页"}},{path:"/login",name:"login",component:S,meta:{title:"登录"}},{path:"*",redirect:"/404",hidden:!0},{path:"/404",component:()=>s.e(560).then(s.bind(s,8560)),hidden:!0}],I=()=>new v.ZP({mode:"hash",scrollBehavior:()=>({y:0}),routes:M}),D=I();function O(){const t=I();D.matcher=t.matcher}i["default"].use(r.ZP);const j={userInfo:null,allAuth:null,socketAction:""},U={SET_USERINFO:(t,e)=>{t.userInfo=e,localStorage.setItem("loginUserInfo",JSON.stringify(e)),m().set("UserInfo",e)},SET_AUTH:(t,e)=>{const s=e.authToken,i=e.sessionId;m().set("authToken",s),m().set("sessionId",i),R(s,i)},catchSocketAction(t,e){t.socketAction=e}},T={Login({commit:t,dispatch:e},s){return new Promise(((i,a)=>{g(s).then((e=>{const s=e.data||s;t("SET_AUTH",s),t("SET_USERINFO",s.userInfo),i(e)})).catch((t=>{console.log(t),e("LogOut"),a(t)}))}))},GetUserInfo({commit:t,state:e}){return new Promise(((t,e)=>{}))},LogOut({commit:t}){return new Promise(((t,e)=>{f().then((()=>{m().rm("authToken"),m().rm("sessionId"),P(),O(),t()})).catch((t=>{e(t)}))}))}};var K=new r.ZP.Store({state:j,mutations:U,actions:T});const N={loadingCache:function(){if(m().get("authKey")&&!d().defaults.headers.authKey){const t=m().get("loginUserInfo");t&&K.commit("SET_USERINFO",t)}K.commit("SET_APPNAME",m().get("systemName")),K.commit("SET_APPLOGO",m().get("systemLogo"))},updateAxiosCache:function(){d().defaults.headers.authKey=m().get("authKey"),d().defaults.headers.sessionId=m().get("sessionId"),K.dispatch("GetUserInfo")},updateAxiosHeaders:function(){d().defaults.headers.authKey=m().get("authKey"),d().defaults.headers.sessionId=m().get("sessionId")},rmAxiosCache:function(){m().rm("authKey"),m().rm("sessionId")}};var A=N;function P(){return new Promise(((t,e)=>{A.rmAxiosCache(),delete d().defaults.headers.authToken,delete d().defaults.headers.sessionId,t(!0)}))}function R(t,e){return new Promise(((s,i)=>{d().defaults.headers.authToken=t,d().defaults.headers.sessionId=e,s(!0)}))}var B=s(5410),L=s.n(B),z=s(9070);const F=(0,z.debounce)(500,(()=>{P().then((()=>{location.reload()})).catch((()=>{location.reload()}))})),E=(0,z.debounce)(500,((t,e="error")=>{(0,u.Message)({message:t,duration:1500,type:e})})),$=(0,z.debounce)(1e3,(t=>{u.MessageBox.confirm(t,"提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then((()=>{F()})).catch((()=>{}))}));d().defaults.headers["Content-Type"]="application/json;charset=UTF-8",window.BASE_URL="http://127.0.0.1:8106/maons/v0",window.LOCALAPI_URL="http://127.0.0.1:8106/local/v0";const Q=d().create({baseURL:window.BASE_URL,timeout:6e4});Q.interceptors.request.use((t=>{const e=t.headers["Content-Type"]&&-1!==t.headers["Content-Type"].indexOf("application/json;charset=UTF-8");if(e)void 0!==t.data&&null!==t.data||(t.data={});else{const e=t.headers["Content-Type"]&&-1!==t.headers["Content-Type"].indexOf("multipart/form-data");t.data=e?t.data:L().stringify(t.data)}return t}),(t=>Promise.reject(t))),Q.interceptors.response.use((t=>{const e=t.data.result;switch(t.status){case 200:if(200!==t.status||"blob"!==t.config.responseType)return e&&e.code&&0!==e.code?(-1===e.code?$(e.msg):E(e.msg),Promise.reject(e)):e;if(t.headers["content-disposition"]||t.headers["content-type"]&&-1!=t.headers["content-type"].indexOf("application/pdf"))return t;{const e=new Blob([t.data],{type:"application/json"}),s=new FileReader;s.onload=function(){const t=JSON.parse(this.result);t.msg&&E(t.msg,1==t.code?"success":"error")},s.readAsText(e)}default:E(t);break}}),(t=>{if(t.response){const e=t.response;switch(e.status){case 401:E(e);break;default:E(e);break}}if(6e4==t.request.timeout)return Promise.reject(t)}));var q=Q,H=0;function G(t,...e){return{id:H++,jsonrpc:"2.0",method:t,params:e}}function V(t,e){var s=G("local.ExitCommunity",t,e);return q({url:"",method:"post",data:JSON.stringify(s),baseURL:window.LOCALAPI_URL})}function J(t,e){var s=G("local.JionCommunity",t,e);return q({url:"",method:"post",data:JSON.stringify(s),baseURL:window.LOCALAPI_URL})}async function X(t){var e=G("maons.GetAuth",t,"read"),s=await q({url:"",method:"post",data:JSON.stringify(e)});return console.log(s),q.defaults.headers.Authorization="Bearer "+s.data,s}function Z(){var t=G("maons.GetUser");return q({url:"",method:"post",data:JSON.stringify(t)})}function Y(t){var e=G("maons.InitContacts",t);return q({url:"",method:"post",data:JSON.stringify(e)})}function W(t){var e=JSON.stringify(G("maons.SendMessage",t));return q({url:"",method:"post",data:e})}function tt(t){return q({url:"",method:"post",data:JSON.stringify(G("maons.RequestEnvent",t)),timeout:6e10})}function et(t,e,s){return q({url:"",method:"post",data:JSON.stringify(G("maons.GetMessagelist",t,e,s))})}function st(t){return q({url:"enterprise/im/undoMessage",method:"post",data:t})}function it(t){return q({url:"enterprise/im/setting",method:"post",data:t})}function at(t){return q({url:"enterprise/group/editGroupName",method:"post",data:t})}function nt(t){var e=G("maons.GetgroupUserList",t);return q({url:"",method:"post",data:JSON.stringify(e)})}function rt(t){return q({url:"enterprise/group/getAllUser",method:"post",data:t})}function ot(t){return q({url:"enterprise/group/add",method:"post",data:t})}function ct(t){return q({url:"enterprise/group/setManager",method:"post",data:t})}function lt(t){return q({url:"enterprise/group/removeUser",method:"post",data:t})}function dt(t){return q({url:"enterprise/group/addGroupUser",method:"post",data:t})}function ut(t){return q({url:"enterprise/group/removeGroup",method:"post",data:t})}function pt(t){return q({url:"enterprise/group/setNotice",method:"post",data:t})}function ht(t){return q({url:"enterprise/group/groupSetting",method:"post",data:t})}function mt(t){return q({url:"enterprise/group/groupInfo",method:"post",data:t})}function gt(t){return q({url:"enterprise/im/isNotice",method:"post",data:t})}function ft(t){return q({url:"enterprise/im/setChatTop",method:"post",data:t})}s(2801);function vt(t,e,s){if("object"!==typeof t)return!1;for(var i=[],a=0;t.length>a;a++)if("object"==typeof e)for(var n=0;e.length>n;n++){var r=e[n],o=t[a][r];if(-1!=o.indexOf(s)){i.push(t[a]);break}}else{o=t[a][e];-1!=o.indexOf(s)&&i.push(t[a])}return i}function wt(t,e,s){s="undefined"!==typeof s&&s;for(var i=[],a=0;a<t.length;a++)i.push(t[a][e]);return!0===s?i.join(","):i}function yt(t,e,s){for(var i=0;i<t.length;i++)t[i][e]==s&&t.splice(i,1);return t}function Ct(t,e,s){for(var i=0;i<t.length;i++)t[i]["disabled"]=!1,t[i][e]==s&&(t[i]["disabled"]=!0);return t}function bt(t){var e=parseInt(t/1e3);return xt(t)?_t("H:i",e):_t("Y/m/d",e)}function _t(t,e){var s=e?new Date(1e3*e):new Date,i=function(t,e){return(t+="").length<e?new Array(++e-t.length).join("0")+t:t},a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},r=["","January","February","March","April","May","June","July","August","September","October","November","December"],o={d:function(){return i(o.j(),2)},D:function(){return o.l().substr(0,3)},j:function(){return s.getDate()},l:function(){return a[o.w()]},N:function(){return o.w()+1},S:function(){return n[o.j()]?n[o.j()]:"th"},w:function(){return s.getDay()},z:function(){return(s-new Date(s.getFullYear()+"/1/1"))/864e5>>0},W:function(){var t,e=o.z(),i=364+o.L()-e,a=(new Date(s.getFullYear()+"/1/1").getDay()||7)-1;return i<=2&&(s.getDay()||7)-1<=2-i?1:e<=2&&a>=4&&e>=6-a?(t=new Date(s.getFullYear()-1+"/12/31"),_t("W",Math.round(t.getTime()/1e3))):1+(a<=3?(e+a)/7:(e-(7-a))/7)>>0},F:function(){return r[o.n()]},m:function(){return i(o.n(),2)},M:function(){return o.F().substr(0,3)},n:function(){return s.getMonth()+1},t:function(){var t;return 2===(t=s.getMonth()+1)?28+o.L():1&t&&t<8||!(1&t)&&t>7?31:30},L:function(){var t=o.Y();return 3&t||!(t%100)&&t%400?0:1},Y:function(){return s.getFullYear()},y:function(){return(s.getFullYear()+"").slice(2)},a:function(){return s.getHours()>11?"pm":"am"},A:function(){return o.a().toUpperCase()},B:function(){var t=60*(s.getTimezoneOffset()+60),e=3600*s.getHours()+60*s.getMinutes()+s.getSeconds()+t,i=Math.floor(e/86.4);return i>1e3&&(i-=1e3),i<0&&(i+=1e3),1===String(i).length&&(i="00"+i),2===String(i).length&&(i="0"+i),i},g:function(){return s.getHours()%12||12},G:function(){return s.getHours()},h:function(){return i(o.g(),2)},H:function(){return i(s.getHours(),2)},i:function(){return i(s.getMinutes(),2)},s:function(){return i(s.getSeconds(),2)},O:function(){var t=i(Math.abs(s.getTimezoneOffset()/60*100),4);return t=s.getTimezoneOffset()>0?"-"+t:"+"+t,t},P:function(){var t=o.O();return t.substr(0,3)+":"+t.substr(3,2)},c:function(){return o.Y()+"-"+o.m()+"-"+o.d()+"T"+o.h()+":"+o.i()+":"+o.s()+o.P()},U:function(){return Math.round(s.getTime()/1e3)}};let c="";return t.replace(/[\\]?([a-zA-Z])/g,(function(t,e){return c=t!==e?e:o[e]?o[e]():e,c}))}function xt(t){return(new Date).getTime()-t<864e5}function kt(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var s=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?s:3&s|8).toString(16)}));return e}var St=function(){var t=this;t._self._c;return t._m(0)},Mt=[function(){var t=this,e=t._self._c;return e("div",[e("audio",{attrs:{id:"chatAudio"}},[e("source",{attrs:{src:s(444),type:"audio/mpeg"}})])])}],It={name:"socket",data(){return{user:null,loop:!1}},methods:{initWebSocket(t){this.user=t,this.loop||(this.loop=!0,this.loopEnvent(t.id))},async loopEnvent(t){console.log("start loop ");while(this.loop){var e=await tt(t);e?this.websocketOnMessage(e):await new Promise((t=>setTimeout(t,1e3)))}},websocketOnMessage(t){for(const e in t.data)switch(t.data[e]["type"]){case"ping":this.websocketSend({type:"pong"});break;case"init":break;default:this.$store.commit("catchSocketAction",t.data[e]);break}},playAudio(){const t=document.getElementById("chatAudio");t.currentTime=0,t.play()}},created(){}},Dt=It,Ot=(0,x.Z)(Dt,St,Mt,!1,null,null,null),jt=Ot.exports,Ut=function(){var t=this,e=t._self._c;return e("div",[e("transition",{attrs:{name:"fade-user"}},[t.myDrawer?e("div",{staticClass:"previewBox"},[e("el-button",{staticClass:"drawer-close",attrs:{type:"danger",icon:"el-icon-close",circle:""},on:{click:t.closeDrawer}}),e("iframe",{attrs:{src:t.previewUrl,frameborder:"0",width:"100%",height:"100%"}})],1):t._e()])],1)},Tt=[],Kt={name:"preview",props:{drawer:{type:Boolean,default:!1},previewUrl:{type:String,default:""}},data(){return{myDrawer:this.drawer}},methods:{closeDrawer(){this.myDrawer=!1}},created(){}},Nt=Kt,At=(0,x.Z)(Nt,Ut,Tt,!1,null,"20778d58",null),Pt=At.exports,Rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-main"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键字搜索聊天"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchMessage},slot:"append"})],1),e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"全部",name:"all"}},[e("div",{staticClass:"el-tab-body-list"},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.dataList,(function(t,s){return e("ChatItem",{key:s,attrs:{data:t}})})),1)],1)]),e("el-tab-pane",{attrs:{label:"文本",name:"text"}},[e("div",{staticClass:"el-tab-body-list"},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.dataList,(function(t,s){return e("ChatItem",{key:s,attrs:{data:t}})})),1)],1)]),e("el-tab-pane",{attrs:{label:"图片",name:"image"}},[e("div",{staticClass:"el-tab-body-list"},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("el-row",{staticStyle:{}},t._l(t.dataList,(function(s,i){return e("ChatImage",{key:i,attrs:{data:s,previewUrl:t.previewList}})})),1)],1)],1)]),e("el-tab-pane",{attrs:{label:"视频",name:"video"}},[e("div",{staticClass:"el-tab-body-list"},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.dataList,(function(t,s){return e("ChatItem",{key:s,attrs:{data:t}})})),1)],1)]),e("el-tab-pane",{attrs:{label:"文件",name:"file"}},[e("div",{staticClass:"el-tab-body-list"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,height:"450"}},[e("el-table-column",{attrs:{prop:"fileName",label:"文件",width:"300"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"chat-file"},[e("div",[e("el-image",{staticClass:"fileExt",attrs:{fit:"cover",src:t.fileExt(s.row.fileName)}})],1),e("div",{staticClass:"fileName"},[t._v(t._s(s.row.fileName))])])]}}])}),e("el-table-column",{attrs:{prop:"sendTime",label:"上传时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatTime(e.row.sendTime))+" ")]}}])}),e("el-table-column",{attrs:{prop:"fileSize",label:"大小",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.fileSize(e.row.fileSize))+" ")]}}])}),e("el-table-column",{attrs:{prop:"fromUser.realname",label:"上传者",width:"100"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.downloadFile(s.row)}}},[t._v("下载")])]}}])})],1)],1)])],1),e("el-pagination",{attrs:{background:"","hide-on-single-page":t.singlePage,"page-size":t.listRows,"current-page":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"update:pageSize":function(e){t.listRows=e},"update:page-size":function(e){t.listRows=e},"update:currentPage":function(e){t.pageSize=e},"update:current-page":function(e){t.pageSize=e},"current-change":t.handleCurrentChange}})],1)},Bt=[],Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-list-item"},[e("div",{staticClass:"chat-list-avatar"},[e("el-avatar",{attrs:{shape:"square",size:"medium",src:t.data.fromUser.avatar}})],1),e("div",{staticClass:"chat-list-body"},[e("div",{staticClass:"chat-list-title"},[t._v(" "+t._s(t.data.fromUser.realname)+" "),e("span",{staticClass:"time"},[t._v(" "+t._s(t.formatTime(t.data.sendTime)))])]),"text"==t.data.type?e("div",{staticClass:"chat-list-text",domProps:{innerHTML:t._s(t.data.content)}}):t._e(),"text"==t.data.type?e("div",{staticClass:"chat-list-tools"},[e("el-tooltip",{attrs:{effect:"dark",content:"复制文本",placement:"top"}},[e("i",{staticClass:"el-icon-document-copy",on:{click:function(e){return t.copyText(t.data.content)}}})])],1):t._e(),"image"==t.data.type?e("div",{staticClass:"chat-list-image"},[e("el-image",{staticStyle:{"max-width":"300px","max-height":"200px"},attrs:{src:t.data.content,"z-index":3e3,"preview-src-list":[t.data.content],fit:"contain"}})],1):t._e(),"video"==t.data.type?e("div",{staticClass:"chat-list-video"},[e("video",{staticStyle:{"max-width":"300px","max-height":"200px"},attrs:{src:t.data.content,controls:""}})]):t._e(),"file"==t.data.type?e("div",{staticClass:"chat-list-file"},[e("el-card",{staticStyle:{width:"260px"},attrs:{"body-style":{padding:"10px 10px 0 10px"}}},[e("div",{staticClass:"chat-file-content"},[e("div",{staticClass:"chat-file-ext"},[e("el-image",{staticStyle:{width:"35px"},attrs:{src:t.fileExt(t.data.fileName),fit:"fill"}})],1),e("div",{staticClass:"chat-file-title"},[e("div",{staticClass:"chat-file-name"},[e("span",{staticClass:"fileName"},[t._v(t._s(t.data.fileName)+" ")]),e("span",{staticClass:"fileSize"},[t._v("("+t._s(t.fileSize(t.data.fileSize))+")")])]),e("div",{staticClass:"chat-file-remark"},[t._v(" 文件已成功发送, 文件助手永久保存 ")])])]),e("hr"),e("div",{staticClass:"bottom clearfix",attrs:{align:"right"}},[e("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.downloadFile(t.data)}}},[t._v("下载")]),e("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.onlinePreview(t.data)}}},[t._v("在线预览")])],1)])],1):t._e()]),e("preview",{key:t.componentKey,attrs:{drawer:t.drawer,previewUrl:t.previewUrl}})],1)},zt=[];function Ft(t){let e=new Array(" B"," KB"," MB"," GB"," TB"),s=t+"B";for(let i=0;t>=1024&&i<4;i++)t/=1024,s=t.toFixed(2)+e[i+1];return s}function Et(t){var e="https://file.lcoce.com/ext/",s=t.split("."),i=s[s.length-1],a=i.toUpperCase(),n=["jpg","jpeg","png","bmp","gif","pdf","mp3","wav","wmv","amr","mp4","3gp","avi","m2v","mkv","mov","webp","ppt","pptx","doc","docx","xls","xlsx","pdf"];return n.includes(a)?e+a+".png":e+"icon/document.svg"}function $t(t,e,s){let i=document.createElement("a");i.download="image"==s?e||"pic":e||"file",i.href=t,i.click()}var Qt={name:"chatItem",components:{preview:Pt},props:{data:{type:Object,default:{}}},computed:{formatTime(){return function(t){return t=parseInt(t/1e3),_t("Y/m/d H:i:s",t)}},fileSize(){return function(t){return Ft(t)}},fileExt(){return function(t){return Et(t)}}},data(){return{drawer:!1,previewUrl:"",componentKey:1}},methods:{copyText(t){this.$clipboard(t),this.$message({type:"success",message:"复制成功!"})},onlinePreview(t){this.drawer=!0,this.componentKey+=1,this.previewUrl=t.preview},downloadFile(t){$t(t.content,t.fileName,t.type)}},created(){}},qt=Qt,Ht=(0,x.Z)(qt,Lt,zt,!1,null,"05fd971f",null),Gt=Ht.exports,Vt=function(){var t=this,e=t._self._c;return e("div",[e("el-col",{staticStyle:{padding:"0 12px 12px 0"},attrs:{span:6}},["image"==t.data.type?e("el-card",{attrs:{"body-style":{padding:"0px"}}},[e("el-image",{staticStyle:{width:"100%",height:"120px"},attrs:{src:t.data.content,"preview-src-list":t.previewUrl,"z-index":9999,fit:"cover"}}),e("div",{staticStyle:{padding:"10px"}},[e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"time"},[t._v(t._s(t.data.fromUser.realname)+" 上传于 "+t._s(t.formatTime(t.data.sendTime)))])])])],1):t._e()],1)],1)},Jt=[],Xt={name:"chatImage",props:{data:{type:Object,default:{}},previewUrl:{type:Array,default:function(){return[]}}},computed:{formatTime(){return function(t){return t=parseInt(t/1e3),_t("Y/m/d",t)}},fileSize(){return function(t){return Ft(t)}},fileExt(){return function(t){return Et(t)}}},data(){return{currentDate:new Date}},methods:{copyText(t){this.$clipboard(t),this.$message({type:"success",message:"复制成功!"})},downloadFile(t){$t(t.content,t.fileName,t.type)}},created(){}},Zt=Xt,Yt=(0,x.Z)(Zt,Vt,Jt,!1,null,"ac5764cc",null),Wt=Yt.exports,te={name:"chatRecord",components:{ChatItem:Gt,ChatImage:Wt},props:{contact:{type:Object,default:{}}},computed:{formatTime(){return function(t){return t/=1e3,_t("Y/m/d H:i:s",t)}},fileSize(){return function(t){return Ft(t)}},fileExt(){return function(t){return Et(t)}}},data(){return{activeName:"all",keywords:"",msgType:"all",pageSize:0x10000000000000000,listRows:20,total:0,singlePage:!1,dataList:[],previewList:[]}},methods:{handleClick(t,e){this.pageSize=1,this.msgType=t.name,this.getMessage()},searchMessage(){this.getMessage()},getMessage(){contact.pageSize||(contact.pageSize=(new Date).getTime()),et(this.listRows,contact.pageSize,this.contact.user_id).then((t=>{this.dataList=t.data,this.total=t.count,t.count<=this.listRows?this.singlePage=!0:this.singlePage=!1,"image"==this.msgType&&(this.previewList=wt(t.data,"content",!1));let e=t.data;e.length>0&&(contact.pageSize=e[0].sendTime)})).catch((t=>{console.log(t)}))},handleCurrentChange(t){console.log(t),this.pageSize=t,this.getMessage()},downloadFile(t){$t(t.content,t.fileName,t.type)}},created(){this.getMessage()},mounted(){}},ee=te,se=(0,x.Z)(ee,Rt,Bt,!1,null,"6d2c3d5a",null),ie=se.exports,ae=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"group-item"},[e("div",{staticClass:"group-avatar"},[e("el-avatar",{attrs:{shape:"square",src:t.contact.avatar}})],1),e("div",{staticClass:"group-content"},[e("div",{staticClass:"group-title"},[t._v(t._s(t.contact.displayName)+" "),e("span",[t._v("("+t._s(t.groupInfo.groupUserCount)+")")])]),e("div",{staticClass:"group-user"},[t._v("群主："+t._s(t.groupInfo.ownerName))])])]),e("div",{staticClass:"setting-item"},[e("div",{staticClass:"setting-title"},[t._v("群管理：")]),e("div",{staticClass:"setting-option"},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:t.groupSetting},model:{value:t.setting.manage,callback:function(e){t.$set(t.setting,"manage",e)},expression:"setting.manage"}})],1),t._m(0)]),e("div",{staticClass:"setting-item"},[e("div",{staticClass:"setting-title"},[t._v("群成员邀请：")]),e("div",{staticClass:"setting-option"},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:t.groupSetting},model:{value:t.setting.invite,callback:function(e){t.$set(t.setting,"invite",e)},expression:"setting.invite"}})],1),t._m(1)]),e("div",{staticClass:"setting-item"},[e("div",{staticClass:"setting-title"},[t._v("群禁言：")]),e("div",{staticClass:"setting-option"},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.groupSetting},model:{value:t.setting.nospeak,callback:function(e){t.$set(t.setting,"nospeak",e)},expression:"setting.nospeak"}},[e("el-radio-button",{attrs:{label:"0"}},[t._v("关闭")]),e("el-radio-button",{attrs:{label:"1"}},[t._v("仅管理员可发言")]),e("el-radio-button",{attrs:{label:"2"}},[t._v("仅群主可发言")])],1)],1)])])},ne=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-description"},[e("div",{staticClass:"des-title"},[t._v("仅群主和群管理员可以管理")]),e("div",{staticClass:"des-comment"},[t._v("启用后，其他成员不能修改群名称，编辑公告等")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-description"},[e("div",{staticClass:"des-title"},[t._v("允许群成员邀请")]),e("div",{staticClass:"des-comment"},[t._v("启用后，其他成员可以邀请其他人加入群聊")])])}],re={name:"chatSet",props:{contact:{type:Object,default:{}}},data(){return{setting:{},groupInfo:{}}},methods:{groupSetting(){ht({id:this.contact.id,setting:this.setting})}},created(){mt({group_id:this.contact.id}).then((t=>{var e=t.data;this.groupInfo=e,this.setting=e.setting}))}},oe=re,ce=(0,x.Z)(oe,ae,ne,!1,null,"7ee59623",null),le=ce.exports,de=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chatTop"},[e("el-tooltip",{attrs:{content:t.contact.displayName,placement:"top-start",effect:"light"}},[e("div",{staticClass:"top-item",class:t.currentId==t.contact.id?"active":""},[e("div",{staticClass:"avatar"},[e("el-avatar",{attrs:{shape:t.avatarCricle?"circle":"square",size:"small",src:t.contact.avatar}})],1),e("div",{staticClass:"username"},[t._v(" "+t._s(t.contact.displayName)+" ")])])])],1)},ue=[],pe={name:"chatTop",props:{contact:{type:Object,default:{}},currentId:[String,Number],avatarCricle:{type:Boolean,default:!1}},data(){return{}},methods:{},created(){}},he=pe,me=(0,x.Z)(he,de,ue,!1,null,"4d6c8b50",null),ge=me.exports,fe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"lum-dialog-mask animated fadeIn"},[e("el-container",{staticClass:"lum-dialog-box"},[e("el-main",{staticClass:"no-padding mian"},[e("div",{staticClass:"music"},[e("span",{staticClass:"line line1",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line2",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line3",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line4",class:{"line-ani":t.animation}}),e("span",{staticClass:"line line5",class:{"line-ani":t.animation}})]),e("div",{staticStyle:{"margin-top":"35px",color:"#676262","font-weight":"300"}},[0==t.recorderStatus?[e("p",{staticStyle:{"font-size":"13px","margin-top":"5px"}},[e("span",[t._v("语音消息，让聊天更简单方便 ...")])])]:1==t.recorderStatus||2==t.recorderStatus||3==t.recorderStatus?[e("p",[t._v(t._s(t.datetime))]),e("p",{staticStyle:{"font-size":"13px","margin-top":"5px"}},[1==t.recorderStatus?e("span",[t._v("正在录音...")]):2==t.recorderStatus?e("span",[t._v("已暂停录音")]):3==t.recorderStatus?e("span",[t._v("录音时长")]):t._e()])]:4==t.recorderStatus||5==t.recorderStatus||6==t.recorderStatus?[e("p",[t._v(t._s(t.formatPlayTime))]),e("p",{staticStyle:{"font-size":"13px","margin-top":"5px"}},[4==t.recorderStatus?e("span",[t._v("正在播放")]):5==t.recorderStatus?e("span",[t._v("已暂停播放")]):6==t.recorderStatus?e("span",[t._v("播放已结束")]):t._e()])]:t._e()],2)]),e("el-footer",{staticClass:"footer",attrs:{height:"60px"}},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.recorderStatus,expression:"recorderStatus == 0"}],attrs:{type:"primary",size:"small",round:"",icon:"el-icon-microphone"},on:{click:t.startRecorder}},[t._v("开始录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.recorderStatus,expression:"recorderStatus == 1"}],attrs:{type:"warning",size:"small",round:"",icon:"el-icon-video-pause"},on:{click:t.pauseRecorder}},[t._v("暂停录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.recorderStatus,expression:"recorderStatus == 2"}],attrs:{type:"primary",size:"small",round:"",icon:"el-icon-microphone"},on:{click:t.resumeRecorder}},[t._v("继续录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:(2==t.recorderStatus||1==t.recorderStatus)&&t.duration>1,expression:"(recorderStatus == 2 || recorderStatus == 1) && duration>1"}],attrs:{type:"danger",size:"small",round:"",icon:"el-icon-microphone"},on:{click:t.stopRecorder}},[t._v("结束录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.recorderStatus||6==t.recorderStatus,expression:"recorderStatus == 3 || recorderStatus == 6"}],attrs:{type:"success",size:"small",round:"",icon:"el-icon-video-play"},on:{click:t.playRecorder}},[t._v("播放录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.recorderStatus||5==t.recorderStatus||6==t.recorderStatus,expression:"\n          recorderStatus == 3 || recorderStatus == 5 || recorderStatus == 6\n        "}],attrs:{type:"warning",size:"small",round:"",icon:"el-icon-refresh-right"},on:{click:t.startRecorder}},[t._v("重新录音 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:4==t.recorderStatus,expression:"recorderStatus == 4"}],attrs:{type:"info",size:"small",round:"",icon:"el-icon-video-pause"},on:{click:t.pausePlayRecorder}},[t._v("暂停播放 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:5==t.recorderStatus,expression:"recorderStatus == 5"}],attrs:{type:"success",size:"small",round:"",icon:"el-icon-video-play"},on:{click:t.resumePlayRecorder}},[t._v("继续播放 ")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.recorderStatus||5==t.recorderStatus||6==t.recorderStatus,expression:"\n          recorderStatus == 3 || recorderStatus == 5 || recorderStatus == 6\n        "}],attrs:{type:"primary",size:"small",round:""},on:{click:t.submit}},[t._v("立即发送 ")])],1)],1)],1)},ve=[],we=s(7362),ye=s.n(we),Ce={name:"voiceRecorder",data(){return{recorder:null,duration:0,playTime:0,animation:!1,recorderStatus:0,playTimeout:null}},computed:{datetime(){let t=parseInt(this.duration/60/60%24),e=parseInt(this.duration/60%60),s=parseInt(this.duration%60);return t<10&&(t=`0${t}`),e<10&&(e=`0${e}`),s<10&&(s=`0${s}`),`${t}:${e}:${s}`},formatPlayTime(){let t=parseInt(this.playTime/60/60%24),e=parseInt(this.playTime/60%60),s=parseInt(this.playTime%60);return t<10&&(t=`0${t}`),e<10&&(e=`0${e}`),s<10&&(s=`0${s}`),`${t}:${e}:${s}`}},destroyed(){this.recorder&&this.destroyRecorder()},methods:{closeBox(){null!=this.recorder?(1==this.recorderStatus?this.stopRecorder():4==this.recorderStatus&&this.pausePlayRecorder(),this.destroyRecorder((()=>{this.$emit("close",!1)}))):this.$emit("close",!1)},startRecorder(){let t=this;this.recorder=new(ye()),this.recorder.onprocess=e=>{e=parseInt(e),t.duration=e},this.recorder.start().then((()=>{this.recorderStatus=1,this.animation=!0}),(t=>{console.log(`${t.name} : ${t.message}`)}))},pauseRecorder(){this.recorder.pause(),this.recorderStatus=2,this.animation=!1},resumeRecorder(){this.recorderStatus=1,this.recorder.resume(),this.animation=!0},stopRecorder(){this.recorderStatus=3,this.recorder.stop(),this.animation=!1},playRecorder(){this.recorderStatus=4,this.recorder.play(),this.playTimeouts(),this.animation=!0},pausePlayRecorder(){this.recorderStatus=5,this.recorder.pausePlay(),clearInterval(this.playTimeout),this.animation=!1},resumePlayRecorder(){this.recorderStatus=4,this.recorder.resumePlay(),this.playTimeouts(),this.animation=!0},destroyRecorder(t){this.recorder.destroy().then((()=>{this.recorder=null,t&&t()}))},recorderSize(){return this.recorder.fileSize},playTimeouts(){this.playTimeout=setInterval((()=>{let t=parseInt(this.recorder.getPlayTime());this.playTime=t,t==this.duration&&(clearInterval(this.playTimeout),this.animation=!1,this.recorderStatus=6)}),100)},submit(){let t=this.recorder.getWAVBlob(),e=new File([t],"在线录音.wav",{type:t.type,lastModified:Date.now()});this.$emit("send",this.duration,e)}}},be=Ce,_e=(0,x.Z)(be,fe,ve,!1,null,"1ca7c568",null),xe=_e.exports,ke=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"webrtc-box"},[t._m(0),t._m(1),e("video",{directives:[{name:"show",rawName:"v-show",value:t.localStream&&t.is_video,expression:"localStream && is_video"}],ref:"localvideo",staticClass:"localvideo",attrs:{autoplay:"",playsinline:""}}),e("video",{directives:[{name:"show",rawName:"v-show",value:t.remoteStream&&t.is_video,expression:"remoteStream && is_video"}],ref:"remotevideo",staticClass:"remotevideo",attrs:{autoplay:"",playsinline:""}}),e("div",[t.caller?e("div",{staticClass:"call-user"},[2==t.status&&t.is_video?t._e():e("img",{staticClass:"avatar",attrs:{src:t.caller.avatar,alt:""}}),e("div",{staticClass:"text"},[t.is_video||2!=t.status?t._e():e("b",[t._v(t._s(t.caller.displayName))]),2!=t.status?e("span",[t.isReceived?e("span",[t._v(" "+t._s(t.caller.displayName)+" 正在请求与您"+t._s(t.is_video?"视频":"语音")+"通话")]):e("span",[t._v("您正对 "),e("b",[t._v(t._s(t.caller.displayName))]),t._v(" 发起"+t._s(t.is_video?"视频":"语音")+"通话")])]):t._e()])]):t._e(),e("div",{staticClass:"calling-button"},[t.calling&&3==t.status?e("div",{staticClass:"button"},[e("img",{staticClass:"image",attrs:{src:"https://im.file.raingad.com/static/image/jieting.png"},on:{click:function(e){return t.answer()}}}),e("div",{staticClass:"text"},[t._v("接听")])]):t._e(),2==t.status?e("div",{staticClass:"button"},[e("img",{staticClass:"image-icon",attrs:{src:"https://im.file.raingad.com/static/image/voice"+(t.voiceStatus?"":"-off")+".png"},on:{click:function(e){return t.switchVoice()}}})]):t._e(),t.calling&&0!=t.status?e("div",{staticClass:"button"},[e("img",{staticClass:"image",attrs:{src:"https://im.file.raingad.com/static/image/guaduan.png"},on:{click:function(e){return t.hangup(!0)}}}),e("div",{staticClass:"text"},[t._v("挂断")])]):t._e(),2==t.status?e("div",{staticClass:"button"},[t.is_video?e("img",{staticClass:"image-icon",attrs:{src:"https://im.file.raingad.com/static/image/camera"+(t.videoStatus?"":"-off")+".png"},on:{click:function(e){return t.switchVideo()}}}):e("div",{staticClass:"image-icon"})]):t._e()])])])},Se=[function(){var t=this,e=t._self._c;return e("audio",{attrs:{id:"music1"}},[e("source",{attrs:{src:s(7420)}})])},function(){var t=this,e=t._self._c;return e("audio",{attrs:{id:"music2"}},[e("source",{attrs:{src:s(1739)}})])}],Me="jsjiami.com.v6",Ie=[Me,"QcO8w5tWw60=","w5PCrQgJMQ==","bjVHw7V/","Bm88w6HDo8OYKMKVw6DCuMOl","w5bDuTpCNcKwwqjDvjpiwpFEw7jDhw==","w7grwoQhw5opw7oVbQQ=","J8OcwqvChsK3chjCim4Gw6s=","eMOpBw5h","wr3Dp8O6AVQ=","eU3Dp8OgXA==","N2HDsFo=","w5hPwrzCj30=","CsKBB8O1DsOLAg==","PMOIwprDo8ONA0A=","QVbDk8Kz","woTDg8OgJA==","LcOVw4BRJMOxDHUL","SxjDojw1","bcKdwr/DmMKp","LcOBw5hZCMOqDQ==","P33DqlpuwrbDhQ==","alIHMcKM","H8KKA8Ol","QcO4PjE=","LT3DtRMgwrk1wpVU","woEoeGUmwo0=","EWg9DMOJ","XcOBwoIDcw==","wrMxw5NnTBHDtA==","AQBdKBU=","w7lww4nCiMKP","XBDDozUuwoHCvg==","GkjDmcOuw5zCgg==","DG8tw4XDrsOoNA==","JTXDtxs=","w6ItwoMlw5k=","MwdTJcOcw57DlQ==","ODXDvRoMwoYuwodFw6xt","w7Fyw6TCgMKiwpxu","w5dBw63CoMKx","L3rDvXFjwqvDjsKlQQ==","w7rCrBvCnhfCgcOk","TMOpwrM0Zw==","w7xNwrHCjA==","w6cwwoY0w5M=","WRTDsRPDpMOxw5HDsA==","w7Fyw6TCgMKuwoA=","w7F8w6bCmMKqwpF9","NwVbJsOD","Bm4+HcOaCBU=","fgjDvMORwqrDlw==","w5UAwozClA==","esKQwpMq","cUrDh8OcYg==","VsK6JXM=","Bj1nMMOz","DcOnwozCk8Kd","GMODw41QCA==","AipCIMO5","ScOwPDk=","IABWIsOf","w5N7w4rCoE3CpMKa","OsOiwrvCksK0","RRTDixfDhMO7w5LDsA==","wqTDisKHwrUeTHwNGDcNw73Di8OZNQ==","Gg99NRwyeMKkwrJ6BMKUwqI=","FMOiwo/DlcOd","PsKJw4Ykwp3DmMO7wqXCig==","XcKkwpbDo8KDwrjDow==","wp/DqsKpwoQU","PsOYw41EKsOoEG8NbB/DokE=","DHIPH8OSDwRj","UcOvwoXDmC7Dtw==","DMKACMO5","wqJUDRs=","wpspfkEf","SnQNLcKDeg==","PwdbM8O8w5TDksKXAARCw548MMKS","woVaORbCtlvCixg=","UcKgw4/Csg==","w7clwossw5MN","SgLDqisOwoHCv8Kn","w6Nfw73Co8K6","BG8jHsOeGQ==","dUrDt8ObdQ==","w6QowoY5w7sKw6AYayhVRsKc","w73DmMOYwr1qXywQQRhIw7PCnMOEb2rDkQ==","DWA+DsOOGw==","w5PCozXCiTo=","w6Z6w6XCicK5","w4Vlw4fCq1U=","UcOtMyl+Eg==","QsOiwojDjQbDsDTDqMKtBUYQw4M=","EjbDpz8Gew7DvMKgEsOmIwXCjwQ=","w7ppwq/Dg2TDh8K0BXnCi8KIFsKbJcOO","w5LCmcOwDivDjA==","fcOLwrMoR8KJw6EewrsA","wqbDhljCs8OtF8KL","w4LCgcO+CTs=","ZwrDt8OCwrU=","HMKbB8OjF8Od","ZsKfwoAWw4E=","CW4zCMOXOBV+w7tew50=","w43CgsOyGzLDrMKvJsOAw5YN","w5DDuCpbIsK1wqLDtA==","w6B2w6XCg8K9wpddw5pqwqfDpQ==","wovDjcOvKX/DpEHDi8KjHMKP","YRPDvsOEwrPDt0XCocK+P8OU","wqLDgkDCi8O2GMKPw6nDvA==","XsOhworDlSfDljPDs8KrJ0o=","WBTDuw01wo7CusKjwpU=","URHCjyjCkTDDkQ==","w5bCmx/CkA8=","w7PDvytKHg==","OH7DuyjCgg==","XMKFwpfClz7Dig==","TcKxwpXDvw==","w7UxwoMpw5k=","WxNuw650","w7PCrRnCnRfCt8O0w6h0wqQJ","dR7DhSrDnw==","wpoTw6RiVw==","w4PDuS1qOcKiwqTDuyRlwoQ=","H2I1PcOt","6K+O5omT5b2s6Z6q6KSw6aKY","ScK2w5zCtmQGaMOLWsK6Gg==","w5bDuTpbIsK1wqLDtBo=","w6VSwr3CgXJ7HBzCqMOcJw==","Wyhkw5hY","d8OXwo8j","P2fDsFA=","BnPDlyg=","OcOWwqvCgsKyVwnCnEYUw6E=","BhJaPDA=","w7TCqxTCmA==","wrUbQ1QV","FDXDryUuXQnDtMK3L8O0","w7IrwpUFw5ccw7s=","NUVKBg==","w6jCqDkzNA==","wpcyeHM/wpvCjA==","HAp4KT4=","ZjPDiAgq","cjvCnhXCig==","6KyQ5oux5b6M6Z676KeV6aCm","wqnDiFfCvsOoKsKYw7DDqsOMHw==","Sx1qw5hfwpZmw69l","FDPDoiMkXQnDtMK3L8O0","exXDucOAwrA=","b8Kbwpc6w4DDgcKt","SRjDqzwowrzCrcKpwpI1Kw==","w4dXw4fClcKz","wrtYFjpE","f8ORwo8p","woLDjMOtKn/DklE=","wpHDi8OoLXzDpEHDmMKyCMKR","DjXDpScnWBTDscKmNQ==","RijDoyA4","XVzDlcKgwqsswpFcw5TDrA==","MMOKwoQrVw==","A242w7TDn8OuOcKV","w6cFwqnCvcKI","DlQ+DcOW","fixfw41I","w7zDuRR3Pg==","Y1rDo8Kwwos=","cH7Dp8KKwp0=","bTVPw4d3","U8KLwpjCmjfDq3kCwrbCtAg=","DsKLAsODEMOPBSc=","w4QKwo/ClcK2PcKnw4XCkMOhwqs=","w758w6fCnA==","GgJpPzQj","G8Oge8OP","EWohBsO0","CXTDmz/CsQ==","wqXDlMO2LF8=","ahnDqcOkwqrDgFjCvMKPLMOYwpfDocOr","wqvDi8KcwoQzQHc=","a8KRwpIMw57DhcKqwrI=","V8K8w5LCuH4wSMOLXsK4HA==","UsKRwojCkjjCig==","WMKBwo/CvjfDnWAVwr3CoScMQMKY","T8KIwprCgg==","FXfDgTvCpMKH","TMKkwpPDocKNwrfDoA==","w758w6vCjcKnwqRgw4xuwqs=","wrZhw63CisK4","wqIhw4psVwPDjHg+wozClA==","AcKrw5rCsXs=","W8OgwoDDgBvDoCLDsw==","ABvCnxnCvsOpwoDDo1c=","w6A4wpR/ERrCrm1r","LVhFFhA=","UsO0w6txw6k=","6YO26K+05p2r5YuB5bSt5YWM6ZSD","HcOmw5tyFA==","w4XCjMOlGw==","csObwpfDpsOKCkYMw7LCvMKkwrLCoyFowrsfEw==","BXA6w64=","P2fDsFBkwqLDn8KvWgw=","w6J2w63CnsK4wq1gw4w=","wpwIw7VLeg==","IMOpwqvCscKR","BG05CMOI","S0TDlcOJeQ==","w6E3woIyw78Rw7Ue","FWQ1Gw==","w6QhwoIyw4Ugw7oV","wo9GCAbCtlg=","R8O0ITBo","WhzDvDQk","wpgVw691YA==","CzTDrzIHYR7DtMKvCcOzPwTCmxk=","w58cwr3CjMKpPMKWw5g=","AzfDhT3DkQBaKMO7RsK6dMOY","KMOSwqTCi8K+Uw==","wqbDiFrCsQ==","Cw1vOzQ1","TsKgwp/DvQ==","EDrDiCg=","FnUxHcOOGA==","Xg3CrwjCkzbDkCDCgWY=","PU1IDhw1VQ==","Txlyw6Buwptqw7dz","wpxMAxI=","a8KGwrTCoS0=","M37Dg8Ojw7M=","DMOpbsOzw5nDi14lwpcaIzDCq8Ky","JxzDngsB","DjXDoQ==","G8OZwqLDi8OB","ZMOdwoQ/","XsKGOEVg","w5FEwqHCs2E=","Wm8CNw==","Txdww6I=","S2UPPMKff0jCq33CqB4=","w5TDsi9tPMKxwqU=","YCrDrSHDgQ==","d8OUwo4+QQ==","NQheK8OZw5XDlg==","QsOpwp7DmTE=","Z8K1worCsws=","Ln/DvcO4w7I=","w4YNwrQCw6M=","w597w43CrQ==","ZxvCmB/msJjlh5/miqnli4nDhQ==","CW43","w4B5w5/CucKc","MUTDgiXCkw==","wr12JShU","w65gwqLDm2jDv8KcA2zCssK2FsKNAcOKN1I2","WMK6MVp0FHjCjShywovCu8OmRSI=","jsjYliaVKfDmi.cyowm.Wv6ICQGYAS=="];function De(t,e){t=~~"0x"["concat"](t["slice"](1));var i=Ie[t];if(void 0===De["SZvzMW"]){function n(t,e){var s,i=[],a=0,n="",r="";t=atob(t);for(var o=0,c=t["length"];o<c;o++)r+="%"+("00"+t["charCodeAt"](o)["toString"](16))["slice"](-2);t=decodeURIComponent(r);for(var l=0;l<256;l++)i[l]=l;for(l=0;l<256;l++)a=(a+i[l]+e["charCodeAt"](l%e["length"]))%256,s=i[l],i[l]=i[a],i[a]=s;l=0,a=0;for(var d=0;d<t["length"];d++)l=(l+1)%256,a=(a+i[l])%256,s=i[l],i[l]=i[a],i[a]=s,n+=String["fromCharCode"](t["charCodeAt"](d)^i[(i[l]+i[a])%256]);return n}(function(){var t="undefined"!==typeof window?window:"object"===typeof process&&"object"===typeof s.g?s.g:this,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t["atob"]||(t["atob"]=function(t){for(var s,i,a=String(t)["replace"](/=+$/,""),n=0,r=0,o="";i=a["charAt"](r++);~i&&(s=n%4?64*s+i:i,n++%4)?o+=String["fromCharCode"](255&s>>(-2*n&6)):0)i=e["indexOf"](i);return o})})(),De["jFACkk"]=n,De["BvWmcZ"]={},De["SZvzMW"]=!0}var a=De["BvWmcZ"][t];return void 0===a?(void 0===De["DsCFJf"]&&(De["DsCFJf"]=!0),i=De["jFACkk"](i,e),De["BvWmcZ"][t]=i):i=a,i}(function(t,e,s){function i(e,s,i,a,n,r){s>>=8,n="po";var o="shift",c="push";r="‮";if(s<e){while(--e)a=t[o](),s===e&&"‮"===r&&1===r["length"]?(s=a,i=t[n+"p"]()):s&&i["replace"](/[YlVKfDywWICQGYAS=]/g,"")===s&&t[c](a);t[c](t[o]())}return 1153507}i(++e,s)})(Ie,184,47104),Ie&&Ie["length"];var Oe={name:De("‮0","uqoI"),props:{contact:{type:Object,default:{}},userInfo:{type:Object,default:{}},config:{type:Object,default:{}},alias:{type:String,default:De("‫1","9g&r")}},data(){return{status:0,peer:null,peers_id:"",localVideo:"",remoteVideo:"",remoteStream:null,localStream:null,calling:null,conn:null,caller:null,is_video:1,isReceived:!1,videoStatus:!0,voiceStatus:!0,cutdown:40,timer:null}},mounted(){this[De("‫2","*Pe]")]=this[De("‮3","*Pe]")]["localvideo"],this[De("‮4","y4GF")]=this[De("‫5","H6Q)")]["remotevideo"],this[De("‮6","hGwq")]()},methods:{initPeer(){var t={HQHvC:De("‮7","dr[H"),emsmc:"kCHQY",LiONR:De("‫8","y4GF"),BKJOD:De("‮9","]L(w"),HXizJ:De("‫a","hZ@I"),DpTDe:De("‮b","%&XC"),bhHxo:function(t,e){return t===e},ByuQv:De("‮c","xxrQ"),ZiYzU:De("‫d","djIe"),LLRHY:function(t,e){return t+e},kZcVJ:function(t,e){return t+e},toszA:De("‮e","jnHQ"),uxDIb:De("‮f","aI5H"),TbOZv:"close",kSsXq:De("‮10","IHPP")};this[De("‮11","*Pe]")]=t[De("‮12","y4GF")](t[De("‫13","5#4k")](this[De("‫14","85gF")],t[De("‮15","k&OW")]),this[De("‫16","7hRI")]["id"]),this[De("‫17","85gF")]=new Peer(this[De("‫18","7hRI")],this[De("‫19","%&XC")]),this["peer"]["on"](t["uxDIb"],(e=>{if(t[De("‮1a","h1Ib")]!==t[De("‫1b",")yAQ")]){var s=t[De("‫1c","y4GF")]["split"]("|"),i=0;while(1){switch(s[i++]){case"0":this[De("‫1d","bm87")](!1,this[De("‮1e","9gUO")]);continue;case"1":this[De("‫1f","A%&4")]();continue;case"2":this["status"]=2;continue;case"3":this["is_video"]&&(this[De("‫20","5#4k")]=null);continue;case"4":this[De("‮21","sOGH")]["send"]({type:De("‫22","%5al")});continue}break}}else console["info"]("Peer注册成功!",e)})),this[De("‮23","9g&r")]["on"](De("‮24","A%&4"),(e=>{var s=t["LiONR"]["split"]("|"),i=0;while(1){switch(s[i++]){case"0":this["playMusicCall"](t["BKJOD"]);continue;case"1":this[De("‫25","85gF")]=3;continue;case"2":this[De("‫26","@qvZ")]=!0;continue;case"3":this[De("‫27","]L(w")]=e;continue;case"4":this[De("‮28","dppV")]();continue}break}})),this[De("‮29","%&XC")]["on"](t[De("‮2a","[eJV")],(()=>{var e={EFXMJ:"music2"};if(t["HXizJ"]!==t[De("‫2b","v!w5")]){var s=document[De("‮2c","^3Bv")](e[De("‮2d","bm87")]);s["play"]()}else console[De("‮2e","bm87")](t[De("‫2f","jnHQ")])})),this[De("‫30","L#O^")]["on"](t[De("‫31","nDw0")],(e=>{t["bhHxo"](t[De("‫32","(pkJ")],"SRwOs")?(this[De("‫33","men[")]=e,this[De("‫34","dppV")]["on"](t["ZiYzU"],(t=>{this[De("‫35","men[")](t)}))):track[De("‫36","di^2")]=!0}))},callClose(){var t={XQqHP:function(t,e){return t===e},UYWaK:De("‮37","dr[H"),RISBU:"aJxKr",pgwmz:De("‮38","L#O^")};this[De("‮39","[)QF")]["on"](t[De("‮3a","hGwq")],(()=>{t[De("‫3b","[eJV")](t[De("‫3c","v!w5")],t[De("‮3d","7hRI")])?console[De("‫3e","i($l")](De("‮3f","@qvZ"),id):(console[De("‫40","85gF")]("通话中已挂断"),this["hangup"](!1))}))},initLocalStream(t,e){var s={SRkhz:De("‫41","*Pe]"),ZpUSj:function(t,e){return t===e},BMYyR:"PjOLC",ZEvIG:De("‫42","uqoI"),FfASd:De("‮43","dMg$"),SXEWC:function(t,e,s){return t(e,s)},sNFnx:function(t,e){return t===e},kcAdD:"uONxc",EReLz:"stream",JPFnR:function(t,e,s,i){return t(e,s,i)}},i=navigator["getUserMedia"]||navigator[De("‮44","zpeU")]||navigator[De("‫45","nDw0")];s["JPFnR"](i,{video:e,audio:!0},(e=>{var i={Krhmj:De("‮46","hZ@I")};s[De("‫47","kHSH")](s[De("‮48","dppV")],s["BMYyR"])?(this[De("‫49","aI5H")]=this[De("‮4a","di^2")](e),this[De("‮4b","7hRI")]["srcObject"]=this[De("‮4c","5#4k")],t?s[De("‫4d","h1Ib")](s[De("‫4e","ONxJ")],s[De("‫4f","k&OW")])?track[De("‮50","IHPP")]===i[De("‮51","(pkJ")]&&(track[De("‮52","vl7e")]=!0):(this[De("‮53","jnHQ")]=this[De("‮54","g$fW")][De("‫55","ONxJ")](t,e),this[De("‫56","xxrQ")](),this["status"]=1,this[De("‮57",")yAQ")]=s[De("‫58","9g&r")](setInterval,(()=>{var i={IycNW:function(t,e){return t==e}};this[De("‫59","xxrQ")]--,0==this[De("‮5a","IHPP")]&&(s[De("‫5b","men[")]!==s["SRkhz"]?(this["calling"]=this[De("‫5c","vl7e")][De("‫5d","h1Ib")](t,e),this[De("‫5e","!w5$")](),this[De("‫5f","qUya")]=1,this[De("‫60","85gF")]=setInterval((()=>{this["cutdown"]--,i[De("‮61","L#O^")](this[De("‫62","y4GF")],0)&&this["hangup"](!0)}),1e3)):this["hangup"](!0))}),1e3)):s["sNFnx"](s[De("‫63","%5al")],s[De("‮64","*Pe]")])?this[De("‫65",")yAQ")][De("‫66","v!w5")](e):(tracks[De("‮67","aI5H")]((t=>{t[De("‫68","!w5$")]===De("‮69","7hRI")&&(t[De("‮6a","[)QF")]=!0)})),this[De("‮6b","!w5$")]=!0),this[De("‮6c","*Pe]")]["on"](s[De("‮6d","*Pe]")],(t=>{this["remoteStream"]=t,this["remoteVideo"][De("‮6e","IHPP")]=t}))):track[De("‫6f","oR8s")]=!1}),(function(t){}))},called(t){var e={FTDtF:function(t,e){return t===e},Vwamo:De("‫70","L#O^"),dFfKz:function(t,e){return t===e},PTUwC:"data",qQsuo:"calling",QxnaK:function(t,e){return t+e},kEbsC:"-raingad-peers-id-",NaaoZ:De("‫71","(pkJ"),KKyZy:De("‫72","7hRI")};this[De("‫73","dr[H")]=t,this[De("‮74","*Pe]")]=this[De("‫75","*Pe]")];var s=e["QxnaK"](this[De("‫76","[)QF")]+e["kEbsC"],this[De("‫77","85gF")]["id"]);if(this[De("‫78","uzGB")])return!1;this[De("‮79","9gUO")]=this[De("‫7a","rE20")]["connect"](s),this[De("‮21","sOGH")]["on"](e[De("‮7b","k&OW")],(()=>{var s={TCpgI:function(t,s){return e["dFfKz"](t,s)}};this[De("‮7c","nDw0")]["on"](e[De("‫7d","[)QF")],(t=>{if(e[De("‮7e","5#4k")](e[De("‫7f","xxrQ")],e["Vwamo"]))this["receivedMsg"](t);else{var i={XwbrC:function(t,e){return s[De("‮80","[)QF")](t,e)}};tracks["forEach"]((t=>{i["XwbrC"](t[De("‮81","h1Ib")],De("‮82","[)QF"))&&(t[De("‫83","i($l")]=!1)})),this[De("‮6b","!w5$")]=!1}}));let i={type:e[De("‮84","5#4k")],userInfo:this[De("‫85","dr[H")],is_video:t};this["conn"]["send"](i)})),this[De("‫86","aySP")](s,t),this[De("‮87","%5al")](e[De("‫88","jnHQ")])},answer(){var t={RNGEF:De("‮89","rE20"),iugPL:De("‫22","%5al")};if(this[De("‮8a","9g&r")]){var e=t[De("‮8b","aySP")]["split"]("|"),s=0;while(1){switch(e[s++]){case"0":this[De("‫8c","xxrQ")]();continue;case"1":this[De("‫8d","85gF")]&&(this[De("‮8e","hGwq")]=null);continue;case"2":this[De("‮8f","vl7e")][De("‫90","dMg$")]({type:t[De("‫91","qUya")]});continue;case"3":this[De("‫92","men[")]=2;continue;case"4":this[De("‫93","[)QF")](!1,this[De("‮94","%&XC")]);continue}break}}},receivedMsg(t){var e={wCOIc:"calling",qLuOq:"hangup",JaQhM:function(t,e){return t(e)}};switch(t[De("‮95","H6Q)")]){case e["wCOIc"]:this[De("‮96","7hRI")]=t[De("‮97",")yAQ")],this["is_video"]=t["is_video"];break;case e[De("‫98","*Pe]")]:this["hangup"](!1);break;case De("‫99","85gF"):this["status"]=2,e[De("‮9a","k&OW")](clearInterval,this["timer"]),this[De("‫9b","7hRI")]();break}},hangup(t){var e={LaOuA:function(t,e){return t(e)},NJYfe:De("‮9c","aySP"),GtNPF:function(t,e){return t==e},jvjgj:function(t,e){return t!=e},ljvNm:De("‮9d","85gF")};if(e[De("‫9e","oR8s")](clearInterval,this[De("‫9f","*Pe]")]),this["status"]){var s=e["NJYfe"][De("‮a0","i($l")]("|"),i=0;while(1){switch(s[i++]){case"0":2!=this[De("‮a1","h1Ib")]&&this[De("‫a2","hGwq")]();continue;case"1":e["GtNPF"](this["calling"],null);continue;case"2":this[De("‫a3","bm87")]();continue;case"3":this[De("‫a4","zpeU")]();continue;case"4":this["caller"]=null;continue;case"5":this["remoteStream"]=null;continue;case"6":this[De("‮a5","djIe")]=0;continue;case"7":this[De("‮a6","L#O^")]=!1;continue;case"8":this[De("‮a7","sOGH")][De("‫a8","djIe")]();continue}break}}t&&e[De("‫a9","uzGB")](this[De("‫aa","vl7e")],2)&&this["conn"]["send"]({type:e[De("‫ab","rE20")]})},getMediaStream(t){return this[De("‫ac","85gF")]?t["getAudioTracks"]()["forEach"]((e=>{this[De("‮ad","djIe")][De("‫ae","di^2")](e),t[De("‫af","*Pe]")](e)})):this[De("‫b0","ONxJ")]=t,this["localStream"]},closeLocalMedia(){var t={IYelt:function(t,e){return t!==e},BceEN:"ZlXaR"};this["localStream"]&&this[De("‮b1","uzGB")][De("‫b2","sOGH")]()&&this[De("‮b3","hGwq")][De("‫b4",")yAQ")]()[De("‮b5","@qvZ")]((e=>{t[De("‮b6","oR8s")](t[De("‫b7","di^2")],De("‫b8","uqoI"))?this[De("‮b9","[eJV")]=null:e[De("‮ba","9g&r")]()})),this["localStream"]=null},switchVoice(){var t={lqFpa:function(t,e){return t===e},GGZEF:De("‮bb","7hRI"),EykOR:function(t,e){return t===e},JWCat:"XGDDA",QpJOT:De("‫bc","dppV"),zceTV:function(t,e){return t(e)},wELfx:"ywTiI"};if(null==this[De("‮bd","oR8s")]){if(!t[De("‫be","dr[H")](t[De("‫bf","y4GF")],t["QpJOT"]))return t[De("‫c1","85gF")](alert,De("‫c2","men[")),!1;this[De("‮c0","di^2")](data)}const e=this[De("‫c3","H6Q)")][De("‮c4","di^2")]();this[De("‮c5","(pkJ")]?t["EykOR"](De("‫c6","dppV"),t["wELfx"])?(this[De("‫c7","L#O^")]=conn,this[De("‮c8","IHPP")]["on"](De("‫c9","uqoI"),(t=>{this[De("‫ca","5#4k")](t)}))):(e["forEach"]((e=>{t[De("‮cb","%5al")](e[De("‫cc","oR8s")],t[De("‮cd","qUya")])&&(e["enabled"]=!1)})),this[De("‮ce","bm87")]=!1):(e[De("‫cf","7hRI")]((e=>{t["EykOR"](e[De("‮d0","]L(w")],De("‫d1","kHSH"))&&(e[De("‫d2","qUya")]=!0)})),this["voiceStatus"]=!0)},switchVideo(){var t={qDqft:function(t,e){return t===e},GuIei:function(t,e){return t===e},VZsRy:De("‫d3","%5al"),YBGQm:function(t,e){return t===e},EEcxz:"IcHWP",Azjic:function(t,e){return t!==e}};if(null==this["localStream"]){if(t[De("‫d4",")yAQ")](t["EEcxz"],t[De("‫d5","@qvZ")]))return alert(De("‫d6","ONxJ")),!1;track[De("‫6f","oR8s")]=!1}const e=this[De("‮d7","sOGH")][De("‫d8","dppV")]();this[De("‮d9","bm87")]?(e["forEach"]((e=>{t["qDqft"](e[De("‮50","IHPP")],De("‫da","uzGB"))&&(e[De("‮db","rE20")]=!1)})),this[De("‫dc",")yAQ")]=!1):t["Azjic"](De("‮dd","*Pe]"),De("‮de","dMg$"))?(e["forEach"]((e=>{t["GuIei"](e[De("‮df","L#O^")],t["VZsRy"])&&(e[De("‫e0","ONxJ")]=!0)})),this[De("‮e1","ONxJ")]=!0):(this[De("‫e2","bm87")]=this[De("‮e3","bm87")][De("‫e4","g$fW")],this["remoteVideo"]=this[De("‮e5","L#O^")]["remotevideo"],this[De("‫e6","aI5H")]())},playMusicCall(t){var e={MeZxn:"music1",RiUqL:function(t,e){return t!==e},AMQKZ:De("‫e7","9gUO"),tkqoO:function(t,e){return t===e},kfxva:De("‫e8","85gF"),BvzdL:De("‮e9","dppV")},s=document["getElementById"](e[De("‮ea","di^2")]);"state"===t?e[De("‫eb","g$fW")](e[De("‮ec","g$fW")],e[De("‮ed","dppV")])?(this[De("‮ee","[eJV")][De("‮ef","vl7e")](track),stream[De("‮f0","9gUO")](track)):s["loop"]=!0:s[De("‮f1","*Pe]")]=!1,s[De("‮f2","%5al")]?s[De("‫f3","^3Bv")]():e[De("‮f4","85gF")](e[De("‮f5","uqoI")],e[De("‫f6","ONxJ")])?stream[De("‮f7","uzGB")]()[De("‫f8","aySP")]((t=>{this["localStream"][De("‫f9","rE20")](t),stream[De("‫fa","H6Q)")](t)})):s["pause"]()},playMusicHandup(){var t={lTUZi:De("‮fb","[eJV")},e=document[De("‫fc","[eJV")](t["lTUZi"]);e[De("‮fd","[eJV")]()}}};Me="jsjiami.com.v6";var je=Oe,Ue=(0,x.Z)(je,ke,Se,!1,null,"34ea5409",null),Te=Ue.exports;const Ke=()=>(new Date).getTime();var Ne,Ae,Pe,Re,Be={name:"app",components:{Socket:jt,preview:Pt,ChatRecord:ie,ChatSet:le,ChatTop:ge,VoiceRecorder:xe,webrtc:Te},data(){const t=this.$createElement;var e=this;return{packageData:C,Background:c,webrtcConfig:{config:{iceServers:[{urls:"stun:stun.voipbuster.com"}]}},componentKey:1,searchResult:!1,createChatBox:!1,addGroupUserBox:!1,forwardBox:!1,noticeBox:!1,messageBox:!1,webrtcBox:!1,groupSetting:!1,VoiceStatus:!1,contactSetting:{},groupUserCount:0,notice:"",createChatTitles:["待选成员","已选成员"],selectUid:[],defaultProps:{key:"user_id",label:"realname",pinyin:"name_py"},contactsProps:{key:"id",label:"realname"},searchList:[],keywords:"",displayName:"",oldName:"",drawer:!1,previewUrl:"",isEdit:!1,settingBox:!1,tabPosition:"left",sendTips:"使用 Enter 键发送消息",setting:{theme:"defalut",hideMessageName:!1,hideMessageTime:!1,avatarCricle:!0,sendKey:1,isVoice:!0},user:{id:"",displayName:"user.realname",avatar:"",account:""},listRows:10,is_group:0,group_id:0,contacts:[],allUser:[],groupUser:[],_beforeUnload_time:0,_gap_time:0,currentChat:{},currentMessage:{},chatTopList:[],playAudio:null,pwd:null,groupMenu:[{text:"发送消息",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;i.changeContact(a.user_id),s()},visible:t=>t.contact.user_id!=this.user.id},{text:"设置管理员",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$confirm("确定设置该成员为管理员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ct({id:this.group_id,user_id:a.user_id,role:2}),this.$message({type:"success",message:"设置成功!"})}))},visible:t=>3==t.contact.role&&this.currentChat.owner_id==this.user.id},{text:"取消管理员",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$confirm("确定取消该成员的管理员权限吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ct({id:this.group_id,user_id:a.user_id,role:3}),this.$message({type:"success",message:"取消成功!"})}))},visible:t=>2==t.contact.role&&this.currentChat.owner_id==this.user.id},{text:"移出群聊",color:"red",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;s(),this.$confirm("确定移除该成员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{lt({id:this.group_id,user_id:a.user_id})}))},visible:t=>t.contact.user_id!=this.user.id&&this.currentChat.owner_id!=t.contact.user_id&&this.currentChat.role<=2}],contactContextmenu:[{icon:"el-icon-upload2",text:"置顶聊天",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;ft({id:a.id,is_top:1,is_group:a.is_group}).then((t=>{0==t.code&&(i.updateContact({id:a.id,is_top:1}),a.is_top=1,this.chatTopList.push(a))})),s()},visible:t=>0==t.contact.is_top},{icon:"el-icon-download",text:"取消置顶",click:(t,e,s)=>{const{IMUI:i,contact:a}=e;ft({id:a.id,is_top:0,is_group:a.is_group}).then((t=>{0==t.code&&(i.updateContact({id:a.id,is_top:0}),yt(this.chatTopList,"id",a.id))})),s()},visible:t=>1==t.contact.is_top},{click(t,e,s){const{IMUI:i,contact:a}=e;s(),gt({id:a.id,is_notice:0,is_group:a.is_group}),i.updateContact({id:a.id,is_notice:0})},icon:"el-icon-bell",text:"消息免打扰",visible:t=>1==t.contact.is_notice},{click(t,e,s){const{IMUI:i,contact:a}=e;s(),gt({id:a.id,is_notice:1,is_group:a.is_group}),i.updateContact({id:a.id,is_notice:1})},icon:"el-icon-close-notification",text:"取消免打扰",visible:t=>0==t.contact.is_notice},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.groupSetting=!0,e.contactSetting=n,e.componentKey++},icon:"el-icon-setting",text:"群管理",visible:t=>1==t.contact.role&&1==t.contact.is_group},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$confirm("确定删除该群聊吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ut({id:n.id}),e.$message({type:"success",message:"删除成功!"})}))},icon:"el-icon-delete",color:"red",text:"删除群聊",visible:t=>t.contact.owner_id==e.user.id&&1==t.contact.is_group},{click(t,s,i){const{IMUI:a,contact:n}=s;i(),e.$confirm("确定退出该群聊吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{lt({id:n.id,user_id:e.user.id}),e.$message({type:"success",message:"退出成功!"})}))},icon:"el-icon-remove-outline",color:"red",text:"退出群聊",visible:t=>t.contact.owner_id!=e.user.id&&1==t.contact.is_group}],contextmenu:[{click:(e,s,i)=>{const{IMUI:a,message:n}=s;st({id:n.id}).then((e=>{const s={id:n.id,type:"event",content:t("div",[t("span",["你撤回了一条消息"," ",t("span",{directives:[{name:"show",value:"text"==n.type}],style:"color:#409EFF;cursor:pointer",attrs:{content:n.content},on:{click:t=>{a.setEditorValue(t.target.getAttribute("content"))}}},["重新编辑"])])]),toContactId:n.toContactId,sendTime:Ke()};a.updateMessage(s)})).catch((t=>{this.$message.error("发生错误")})),i()},visible:t=>t.message.fromUser.id==this.user.id&&Ke()-t.message.sendTime<12e4,text:"撤回消息"},{text:"转发",click:(t,e,s)=>{this.currentMessage=e.message;const{IMUI:i}=this.$refs,a=i.getContacts(),n=i.getCurrentContact();this.allUser=Ct(a,"id",n.id),s(),this.forwardBox=!0}},{visible:t=>"text"==t.message.type,text:"复制文字",click:(t,e,s)=>{this.$clipboard(e.message.content),this.$message({type:"success",message:"复制成功!"}),s()}},{visible:t=>"image"==t.message.type,text:"下载图片",click:(t,e,s)=>{const{message:i}=e;this.download(i.content,i.fileName,i.type),s()}},{visible:t=>"file"==t.message.type,text:"下载文件",click:(t,e,s)=>{const{message:i}=e;this.download(i.content,i.fileName,i.type),s()}}]}},computed:{...(0,r.rn)({socketAction:t=>t.socketAction}),formatTime(){return function(t){return bt(t)}}},watch:{playAudio(t){if(t&&this.currentMessage){let t=this.currentMessage;var e=this;const{IMUI:s}=this.$refs;this.playAudio.addEventListener("ended",(function(){console.log("声音停止"),e.playAudio=null,e.currentMessage=null,s.updateMessage({id:t.id,status:"successd",isPlay:0})}),!1)}},keywords(){const{IMUI:t}=this.$refs,e=t.getContacts();this.searchContact(e)},"setting.sendKey"(t){this.sendTips=1==t?"使用 Enter 键发送消息":"使用 Ctrl + Enter 键发送消息"},setting:{handler(t,e){it(t),user.setting=t,m().set("UserInfo",user)},deep:!0},socketAction(t){const e=this.$createElement;let s=t.data;const{IMUI:i}=this.$refs;m().get("client_id");switch(t.type){case"isOnline":i.updateContact({id:s.id,is_online:s.is_online});break;case"offline":break;case"simple":case"group":case"message":if(s.fromUser.id!=this.user.id){var a=this.getContact(s.fromUser.id);this.setting.isVoice&&1==a.is_notice&&this.popNotice(s)}this.recieveMsg(s);break;case"undoMessage":i.updateMessage(s);break;case"editGroupName":i.updateContact({id:s.id,displayName:s.displayName});const t={id:kt(),type:"event",content:e("div",[e("span",[s.editUserName," 修改了群名为 ",s.displayName])]),toContactId:s.id,sendTime:Ke()};i.appendMessage(t,!0);break;case"isRead":this.setLocalMsgIsRead(s);break;case"addContract":case"addGroup":case"removeContract":s.owner_id!=this.user.id&&i.appendContact(s);break;case"removeGroup":i.removeContact(s.group_id,s.index),i.currentContactId==s.group_id&&i.changeContact(null);break;case"setManager":case"addGroupUser":case"removeUser":s.group_id==this.group_id&&this.getGroupUserList(s.group_id);break;case"setNotice":i.updateContact({id:s.group_id,notice:s.notice}),i.appendMessage({id:kt(),type:"event",content:e("div",[e("span",["管理员 发布了公告： ",s.notice])]),toContactId:s.group_id,sendTime:Ke()},!0);break;case"groupSetting":i.updateContact({id:s.group_id,setting:s.setting});case"updateMetainfo":s.id==this.user.id?this.initUser(s):this.$refs.IMUI.hasContact(s.id)?this.$refs.IMUI.updateContact(s):this.$refs.IMUI.appendContact(s)}}},created(){window.Notification?"granted"==Notification.permission?console.log("允许通知"):"denied"!=Notification.permission&&(console.log("需要通知权限"),Notification.requestPermission((t=>{}))):console.error("浏览器不支持Notification")},mounted(){this.searchResult&&document.addEventListener("click",(function(t){that.$refs.configforms.contains(t.target)||(that.searchResult=!1)})),this.authnew("123456"),window.IMUI=this},methods:{authnew(t){X(t).then((t=>{Z().then((t=>{this.initUser(t.data),this.getSimpleChat(),this.$refs.socket.initWebSocket(t.data)}))})),this.pwd=t},initUser(t){this.user=t},toggleFollow(t){t.is_followed?(V(t.user_id,this.pwd),t.index="最近查看的人"):(J(t.user_id,this.pwd),t.is_group?t.index="Group":t.index="我关注的人"),t.is_followed=!t.is_followed},getUserInfo(t){this.$refs.IMUI.updateContact(menu)},changeMenu(t){console.log(t),this.$refs.IMUI.changeMenu(t)},called(t){this.webrtcBox=!0,this.$refs.webrtc.called(t)},getSimpleChat(){const t=this.$createElement,{IMUI:e}=this.$refs;this.IMUI=e,e.setLastContentRender("voice",(t=>"[语音]")),e.setLastContentRender("video",(t=>"[视频]")),Y(100).then((t=>{const s=t.data;this.contacts=s;var i={};s.forEach(((t,a)=>{t.type&&(i.type=t.type,i.content=t.lastContent,s[a]["lastContent"]=e.lastContentRender(i))})),this.getChatTop(s),e.initContacts(s)})),e.initMenus([{name:"messages"},{name:"contacts"},{name:"custom2",title:"系统设置",unread:0,click:()=>{this.settingBox=!0},render:e=>t("i",{class:"el-icon-setting"}),isBottom:!0}]),e.initEditorTools([{name:"emoji"},{name:"uploadImage",title:"发送图片"},{name:"sendVoice",title:"发送语音",click:()=>{this.VoiceStatus=!0},render:()=>t("i",{class:"el-icon el-icon-microphone f-18",style:"vertical-align: middle;font-weight: 600;"})},{name:"uploadVideo",title:"发送视频",click:()=>{var t=this.$refs.uploadVideo;t.click()},render:()=>t("i",{class:"el-icon el-icon-video-play f-18",style:"vertical-align: middle;font-weight: 600;"},[t("input",{style:"display:none",attrs:{type:"file",accept:"video/*"},ref:"uploadVideo",on:{change:t=>{this.uploadVideo(t)}}})])},{name:"uploadFile",title:"发送文件"}]),e.initEmoji(o)},getChatTop(){for(var t=this.contacts,e=[],s=0;s<t.length;s++)1==t[s].is_top&&e.push(t[s]);this.chatTopList=e},getContact(t){const{IMUI:e}=this.$refs,s=e.getContacts();for(var i=0;i<s.length;i++)if(s[i].id==t)return s[i]},wrapKey(t){return 1==this.setting.sendKey?13==t.keyCode&&t.ctrlKey:13==t.keyCode&&!t.ctrlKey&&!t.shiftKey},setSendKey(t){return 1==this.setting.sendKey?13==t.keyCode&&!t.ctrlKey&&!t.shiftKey:13==t.keyCode&&t.ctrlKey},handleMessageClick(t,e,s,i){if("status"==e){i.updateMessage({id:s.id,status:"going"});const{IMUI:t}=this.$refs;return console.log(s),void this.handleSend(s,(function(e){t.updateContact({id:s.toContactId,lastContent:t.lastContentRender(s),lastSendTime:s.sendTime}),t.updateMessage(Object.assign(s,e))}),null)}if("voice"==s.type){if(!this.playAudio)return this.currentMessage=s,this.playVoice(s,i);this.playAudio.pause(),this.playAudio=null,i.updateMessage({id:this.currentMessage.id,status:"successd",isPlay:0}),s.id!=this.currentMessage.id&&(this.currentMessage=s,this.playVoice(s,i))}var a=["image","file","video"];if(a.includes(s.type)){if(!s.preview)return this.$message.error("没有配置预览接口");this.previewUrl=s.preview,this.drawer=!0}},playVoice(t,e){this.playAudio=new Audio(t.content),this.playAudio.play(),e.updateMessage({id:t.id,status:"succeed",isPlay:1})},openChat(t){this.keywords="";const{IMUI:e}=this.$refs;e.changeContact(t,"messages")},handleChangeContact(t,e){e.updateContact({id:t.id,unread:0}),this.pageSize=0x10000000000000000,this.displayName=t.displayName,this.oldName=t.displayName,this.currentChat=t,1==t.is_group&&this.group_id!=t.id&&this.getGroupUserList(t.id),this.is_group=t.is_group,1==this.is_group&&(this.group_id=t.id,this.notice=t.notice);var s=[];const{IMUI:i}=this.$refs;for(var a=i.getMessages(t.id),n=0;a.length>n;n++)0==a[n].is_read&&a[n].fromUser.id!=this.user.id&&s.push(a[n]);s.length>0&&this.setLocalMsgIsRead(s),e.closeDrawer()},uploadVideo(t){let e=t.srcElement.files[0],s=URL.createObjectURL(e),i={content:s,fromUser:this.user,id:kt(),sendTime:Ke(),status:"going",toContactId:this.currentChat.id,type:"video",extends:{duration:5}};this.diySendMessage(i,e),this.$refs.uploadVideo.value=""},sendVoice(t,e){let s={content:URL.createObjectURL(e),fromUser:this.user,id:kt(),sendTime:Ke(),status:"going",toContactId:this.currentChat.id,type:"voice",isPlay:0,extends:{duration:t}};this.VoiceStatus=!1,this.diySendMessage(s,e)},diySendMessage(t,e){const{IMUI:s}=this.$refs;s.appendMessage(t,!0),this.handleSend(t,(function(e){s.updateContact({id:t.toContactId,lastContent:s.lastContentRender(t),lastSendTime:t.sendTime}),s.CacheDraft.remove(t.toContactId),s.updateMessage(Object.assign(t,e))}),e)},handleSend(t,e,s){new FormData;t.is_group=this.is_group;const{IMUI:i}=this.$refs;if(s){var a=new FileReader;a.onload=function(n){var r=a.result;t.content=r,t.fileName=s.name,t.fileSize=s.size,W(t).then((t=>{e(t.data)})).catch((s=>{401==s.code?i.removeMessage(t.id):e({status:"failed"})}))},a.readAsDataURL(s)}else W(t).then((t=>{i.setEditorValue(""),e(t.data)})).catch((s=>{401==s.code?i.removeMessage(t.id):e({status:"failed"})}))},handlePullMessages(t,e,s){return t.pageSize||(t.pageSize=(new Date).getTime()),et(this.listRows,t.pageSize,t.user_id).then((s=>{let i=!1,a=s.data;a.length>0&&(t.pageSize=a[0].sendTime),a.length<this.listRows&&(i=!0),e(a,i)})).catch((t=>{e([],!0)})),!0},publishNotice(){this.noticeBox=!1,pt({id:this.group_id,notice:this.notice}).then((t=>{0==t.code&&this.$message({type:"success",message:"发布成功!"})}))},openNotice(){var t="<div style='white-space: pre;'>"+this.notice+"</div>";this.$alert(t,"群公告",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0})},getAllUser(t){rt(t).then((t=>{const e=t.data;this.allUser=e}))},openCreateGroup(){this.getAllUser({}),this.createChatBox=!0},openAddGroupUser(){var t=wt(this.groupUser,"user_id");this.getAllUser({user_ids:t}),this.addGroupUserBox=!0},fn(t){return new Promise(((e,s)=>{W(t).then((t=>{0===t.code?e(t):this.$message.error(t.msg)})).catch((t=>{}))}))},async test(t){let e=await this.fn(t);return e},forwardUser(){var t=this.selectUid;if(this.selectUid=[],t.length>5)return this.$message.error("转发的人数不能超过5人！");this.forwardBox=!1;for(var e=this.currentMessage,s=[],i=0;i<t.length;i++){var a=t[i].toString();e.id=kt(),e.status="successd",e.sendTime=Ke(),e.toContactId=a,e.fromUser=this.user,e.is_group=0,-1!=a.indexOf("group")&&(e.is_group=1),s.push(this.test(e))}Promise.all(s).then((t=>{const{IMUI:e}=this.$refs;for(var s=0;s<t.length;s++){var i=t[s].data;0==i.is_group&&(i.toContactId=parseInt(i.toContactId)),e.appendMessage(i),e.updateContact({id:i.toContactId,unread:0})}})).catch((t=>{console.log("error",t)}))},addGroupUser(){this.addGroupUserBox=!1,dt({user_ids:this.selectUid,id:this.group_id}),this.selectUid=[]},createGroup(){this.createChatBox=!1,ot({user_ids:this.selectUid}).then((t=>{const e=t.data,{IMUI:s}=this.$refs;0==t.code&&(s.appendContact(e),s.changeContact(e.id)),this.selectUid=[]}))},getGroupUserList(t){nt(t).then((t=>{if(console.log(t),0==t.code){var e=t.data;this.groupUser=e,this.groupUserCount=e.length}}))},saveGroupName(t){if(this.displayName.length<1)return this.$notify({title:"警告",message:"名称不能为空！",type:"warning"}),this.isEdit=!1,!1;if(this.displayName!=this.oldName){const{IMUI:e}=this.$refs;at({id:t.id,displayName:this.displayName}).then((s=>{e.updateContact({id:t.id,displayName:this.displayName})}))}this.isEdit=!1},closeSearch(){var t=this;setTimeout((function(){t.searchResult=!1}),300)},searchContact(t){""!=this.keywords&&(this.searchList=vt(t,["displayName","name_py"],this.keywords))},setLocalMsgIsRead(t){const{IMUI:e}=this.$refs;for(let s=0;t.length>s;s++){const i={id:t[s]["id"],is_read:1,status:"succeed",content:t[s]["content"]+" "};e.updateMessage(i)}},download(t,e,s){let i=document.createElement("a");i.download="image"==s?e||"pic":e||"file",i.href=t,i.click()},popNotice(t){let e=this;if("granted"==Notification.permission){let s=new Notification("收到一条新消息",{body:t.fromUser.displayName+"："+t.content,icon:t.fromUser.avatar});s.onclick=function(t){e.$nextTick((()=>{setTimeout((()=>{}),500)})),window.focus(),s.close()},console.log("浏览器通知！")}else{console.log("声音通知！");const t=document.getElementById("chatAudio");t.currentTime=0,t.play()}},recieveMsg(t){const{IMUI:e}=this.$refs;this.user.id==t.toContactId&&(t.toContactId=t.fromUser.id),e.appendMessage(t,!0)},openGallery(){this.$message({message:"即将呈现！",type:"warning"})},openMessageBox(){this.messageBox=!0,this.componentKey+=1},changeDrawer(t,e){const s=this.$createElement;e.changeDrawer({offsetX:0,offsetY:1,render:()=>s("div",{class:"drawer-content"},[s("p",[s("b",["自定义抽屉"])]),s("p",[t.displayName])])})},logout(){this.$confirm("你确定要退出聊天室吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$store.dispatch("LogOut").then((()=>{this.$router.push({path:"/login"})}))})).catch((()=>{this.$message({type:"info",message:"已取消退出"})}))}}},Le=Be,ze=(0,x.Z)(Le,a,n,!1,null,"a960dec2",null),Fe=ze.exports,Ee=s(7002),$e=s.n(Ee),Qe=s(5602),qe=s.n(Qe),He=s(8701),Ge=s.n(He),Ve={name:"lemonMessageVoice",inheritAttrs:!1,inject:["IMUI"],render(){const t=arguments[0];return t("lemon-message-basic",Ge()([{class:"lemon-message-voice"},{props:{...this.$attrs}},{attrs:{reverse:this.$attrs.reverse,message:this.$attrs.message,hideName:this.$attrs.hideName,hideTime:this.$attrs.hideTime},scopedSlots:{content:e=>t("div",{class:["voice-card lz-flex lz-justify-content-start lz-align-items-center",{"im-rows-reverse":this.$attrs.reverse}],style:{width:3*e.extends.duration+"px"}},[t("div",{class:["iconfont icon-im-yuyin f-16",{"voice-icon":e.isPlay},{rotate180:this.$attrs.reverse}]}),"  ",t("div",[e.extends.duration,'"'])])}}]))}},Je=Ve,Xe=(0,x.Z)(Je,Ne,Ae,!1,null,null,null),Ze=Xe.exports,Ye={name:"lemonMessageVideo",inheritAttrs:!1,inject:["IMUI"],render(){const t=arguments[0];return t("lemon-message-basic",Ge()([{class:"lemon-message-video"},{props:{...this.$attrs}},{attrs:{reverse:this.$attrs.reverse,message:this.$attrs.message,hideName:this.$attrs.hideName,hideTime:this.$attrs.hideTime},scopedSlots:{content:e=>t("div",{class:["video-card"],style:{}},[t("video",{style:"min-height:200px;",attrs:{src:e.content,controls:!0}})])}}]))}},We=Ye,ts=(0,x.Z)(We,Pe,Re,!1,null,null,null),es=ts.exports;i["default"].use(p(),{size:"small"}),i["default"].use($e()),i["default"].use(K),i["default"].use(qe()),i["default"].config.productionTip=!1,i["default"].component(es.name,es),i["default"].component(Ze.name,Ze),new i["default"]({el:"#app",store:K,components:{App:Fe},template:"<App/>"})},7420:function(t,e,s){"use strict";t.exports=s.p+"assets/media/calling.69742e4c.mp3"},1739:function(t,e,s){"use strict";t.exports=s.p+"assets/media/guaduan.c0b3124b.mp3"},444:function(t,e,s){"use strict";t.exports=s.p+"assets/media/notify.3d49176d.mp3"},4654:function(){}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var r=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],n=t[d][2];for(var o=!0,c=0;c<i.length;c++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[c])}))?i.splice(c--,1):(o=!1,n<r&&(r=n));if(o){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,i){return s.f[i](t,e),e}),[]))}}(),function(){s.u=function(t){return"assets/js/"+t+".c36a33d8.js"}}(),function(){s.miniCssF=function(t){return"assets/css/"+t+".9bee72a6.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="Maons-IM:";s.l=function(i,a,n,r){if(t[i])t[i].push(a);else{var o,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==e+n){o=u;break}}o||(c=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",e+n),o.src=i),t[i]=[a];var p=function(e,s){o.onerror=o.onload=null,clearTimeout(h);var a=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(t){return t(s)})),e)return e(s)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p=""}(),function(){if("undefined"!==typeof document){var t=function(t,e,s,i,a){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var r=function(s){if(n.onerror=n.onload=null,"load"===s.type)i();else{var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=o,n.parentNode.removeChild(n),a(c)}};return n.onerror=n.onload=r,n.href=e,s?s.parentNode.insertBefore(n,s.nextSibling):document.head.appendChild(n),n},e=function(t,e){for(var s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var a=s[i],n=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===t||n===e))return a}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){a=r[i],n=a.getAttribute("data-href");if(n===t||n===e)return a}},i=function(i){return new Promise((function(a,n){var r=s.miniCssF(i),o=s.p+r;if(e(r,o))return a();t(i,o,null,a,n)}))},a={143:0};s.f.miniCss=function(t,e){var s={560:1};a[t]?e.push(a[t]):0!==a[t]&&s[t]&&e.push(a[t]=i(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}}(),function(){var t={143:0};s.f.j=function(e,i){var a=s.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var n=new Promise((function(s,i){a=t[e]=[s,i]}));i.push(a[2]=n);var r=s.p+s.u(e),o=new Error,c=function(i){if(s.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var n=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,a[1](o)}};s.l(r,c,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,r=i[0],o=i[1],c=i[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(c)var d=c(s)}for(e&&e(i);l<r.length;l++)n=r[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},i=self["webpackChunkMaons_IM"]=self["webpackChunkMaons_IM"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(185)}));i=s.O(i)})();